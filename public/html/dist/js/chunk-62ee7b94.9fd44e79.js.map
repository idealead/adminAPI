{"version":3,"sources":["webpack:///./src/designerComponents/structureMaterial.vue?a355","webpack:///src/designerComponents/structureMaterial.vue","webpack:///./src/designerComponents/structureMaterial.vue?f829","webpack:///./src/designerComponents/structureMaterial.vue","webpack:///./node_modules/_core-js@3.6.0@core-js/modules/es.number.constructor.js","webpack:///./src/designerComponents/structureMaterial.vue?6549"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","handleClick","model","value","callback","$$v","first","expression","_l","item","index","key","attrs","data","framework_name","_v","_s","now_structureData","position_name","it","style","backgroundImage","api","$event","donwloadF","img","backF","files","staticStyle","addImgF","_e","class","hover","myMaterial","select","url","hoverFunc","outFunc","selectF","directives","name","rawName","status","addBtn","cancelBtn","staticRenderFns","props","structureD","type","Array","default","replaceData","activeName","addImg","structure_index","structure_id","Number","structure_postion","select_file_id","show","computed","structureData","created","me","$set","setTimeout","mounted","getStructureImg","methods","method","del_framework_material","id","add_framework_material","user_id","user_data","material_id","framework_id","position","parseInt","tab","getImg","find_file","$message","message","i","fetch","imgsrc","then","a","document","createElement","window","URL","createObjectURL","blob","filename","href","download","click","revokeObjectURL","component","DESCRIPTORS","global","isForced","redefine","has","classof","inheritIfRequired","toPrimitive","fails","create","getOwnPropertyNames","f","getOwnPropertyDescriptor","defineProperty","trim","NUMBER","NativeNumber","NumberPrototype","prototype","BROKEN_CLASSOF","toNumber","argument","third","radix","maxCode","digits","length","code","charCodeAt","NaN","slice","NumberWrapper","arguments","dummy","valueOf","call","keys","split","j","constructor"],"mappings":"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","file":"js/chunk-62ee7b94.9fd44e79.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"structureMaterial\"},[_c('div',{staticClass:\"structureNav\"},[_c('el-tabs',{on:{\"tab-click\":_vm.handleClick},model:{value:(_vm.first),callback:function ($$v) {_vm.first=$$v},expression:\"first\"}},_vm._l((_vm.structureData),function(item,index){return _c('el-tab-pane',{key:index,attrs:{\"label\":item.data.framework_name,\"name\":(\"\" + (item.data.id)),\"index\":index}},[_vm._v(_vm._s(item.data.framework_name))])}),1)],1),(_vm.show)?_c('div',{staticClass:\"materialList\"},_vm._l((_vm.now_structureData.data.rule),function(item,index){return _c('div',{key:index,staticClass:\"materialKind\"},[_c('el-tag',[_vm._v(_vm._s(item.position_name)+\"：\")]),_c('div',{staticClass:\"materialDiv\"},[_vm._l((item.files),function(it,index){return _c('div',{key:index,staticClass:\"materialBlock\"},[_c('div',{staticClass:\"materialImg\",style:({backgroundImage:(\"url('\" + (_vm.api.images) + (it.file_path) + \"')\")})}),_c('div',{staticClass:\"materialBtnBlock\"},[_c('el-tooltip',{attrs:{\"content\":\"下载\",\"placement\":\"bottom\",\"effect\":\"light\"}},[_c('div',{staticClass:\"materialBtn\",on:{\"click\":function($event){return _vm.donwloadF(_vm.img)}}},[_c('i',{staticClass:\"el-icon-download\"})])]),_c('el-tooltip',{attrs:{\"content\":\"撤销\",\"placement\":\"bottom\",\"effect\":\"light\"}},[_c('div',{staticClass:\"materialBtn\",on:{\"click\":function($event){return _vm.backF(item.files[index])}}},[_c('i',{staticClass:\"el-icon-refresh-left\"})])])],1)])}),_c('div',{staticClass:\"materialBlock\",staticStyle:{\"cursor\":\"pointer\"},on:{\"click\":function($event){return _vm.addImgF(item)}}},[_c('i',{staticClass:\"el-icon-plus plus\",attrs:{\"size\":\"normal\"}})])],2)],1)}),0):_vm._e(),(_vm.addImg)?_c('div',{staticClass:\"alertBg\"},[_c('div',{staticClass:\"layoutBlock\"},[_vm._l((_vm.myMaterial),function(item,index){return _c('div',{key:index,class:{'zoom':item.hover,myMaterial:true,'selected':item.select},style:({backgroundImage:'url('+item.url+')'}),on:{\"mouseover\":function($event){return _vm.hoverFunc(index)},\"mouseleave\":function($event){return _vm.outFunc(index)},\"click\":function($event){return _vm.selectF(item,index)}}},[_c('i',{directives:[{name:\"show\",rawName:\"v-show\",value:(item.status==3),expression:\"item.status==3\"}],staticClass:\"el-icon-paperclip lock\"})])}),_c('div',{staticClass:\"setBtn\"},[_c('el-button',{staticClass:\"addBtn\",attrs:{\"type\":\"primary\",\"round\":\"\",\"size\":\"small\"},on:{\"click\":_vm.addBtn}},[_vm._v(\"添加\")]),_c('el-button',{staticClass:\"cancelBtn\",attrs:{\"type\":\"info\",\"round\":\"\",\"size\":\"small\"},on:{\"click\":_vm.cancelBtn}},[_vm._v(\"取消\")])],1)],2)]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"structureMaterial\">\r\n    <div class=\"structureNav\">\r\n      <el-tabs v-model=\"first\" @tab-click=\"handleClick\">\r\n        <el-tab-pane\r\n          v-for=\"(item,index) in structureData\"\r\n          :label=\"item.data.framework_name\"\r\n          :name=\"`${item.data.id}`\"\r\n          :index=\"index\"\r\n          :key=\"index\"\r\n        >{{item.data.framework_name}}</el-tab-pane>\r\n        <!--     <el-tab-pane label=\"B2架构\" name=\"second\">B2架构</el-tab-pane>\r\n    <el-tab-pane label=\"C3架构\" name=\"third\">C3架构</el-tab-pane>\r\n        <el-tab-pane label=\"D4架构\" name=\"fourth\">D4架构</el-tab-pane>-->\r\n      </el-tabs>\r\n    </div>\r\n    <div class=\"materialList\" v-if=\"show\">\r\n      <div class=\"materialKind\" v-for=\"(item,index) in now_structureData.data.rule\" :key=\"index\">\r\n        <el-tag>{{item.position_name}}：</el-tag>\r\n        <div class=\"materialDiv\">\r\n          <div class=\"materialBlock\" v-for=\"(it,index) in item.files\" :key=\"index\">\r\n            <div\r\n              class=\"materialImg\"\r\n              :style=\"{backgroundImage:`url('${api.images}${it.file_path}')`}\"\r\n            ></div>\r\n            <div class=\"materialBtnBlock\">\r\n              <!-- <div class=\"materialBtn\" :fileid=\"it.id\"><i class=\"el-icon-star-off \"></i></div> -->\r\n              <el-tooltip content=\"下载\" placement=\"bottom\" effect=\"light\">\r\n                <div class=\"materialBtn\" @click=\"donwloadF(img)\">\r\n                  <i class=\"el-icon-download\"></i>\r\n                </div>\r\n              </el-tooltip>\r\n              <el-tooltip content=\"撤销\" placement=\"bottom\" effect=\"light\">\r\n                <div class=\"materialBtn\" @click=\"backF(item.files[index])\">\r\n                  <i class=\"el-icon-refresh-left\"></i>\r\n                </div>\r\n              </el-tooltip>\r\n            </div>\r\n          </div>\r\n          <div class=\"materialBlock\" style=\"cursor:pointer\" @click=\"addImgF(item)\">\r\n            <!-- <div class=\"materialImg\"></div> -->\r\n            <i class=\"el-icon-plus plus\" size=\"normal\"></i>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"alertBg\" v-if=\"addImg\">\r\n      <div class=\"layoutBlock\">\r\n        <div\r\n          v-for=\"(item,index) in myMaterial\"\r\n          :key=\"index\"\r\n          :style=\"{backgroundImage:'url('+item.url+')'}\"\r\n          @mouseover=\"hoverFunc(index)\"\r\n          @mouseleave=\"outFunc(index)\"\r\n          :class=\"{'zoom':item.hover,myMaterial:true,'selected':item.select}\"\r\n          @click=\"selectF(item,index)\"\r\n        >\r\n          <i class=\"el-icon-paperclip lock\" v-show=\"item.status==3\"></i>\r\n        </div>\r\n        <div class=\"setBtn\">\r\n          <el-button type=\"primary\" round class=\"addBtn\" @click=\"addBtn\" size=\"small\">添加</el-button>\r\n          <el-button type=\"info\" round class=\"cancelBtn\" @click=\"cancelBtn\" size=\"small\">取消</el-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<style type=\"text/css\" scoped>\r\n.structureMaterial {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: absolute;\r\n  top: 0;\r\n  padding: 20px;\r\n  box-sizing: border-box;\r\n  padding-top: 100px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.structureNav {\r\n  width: 100%;\r\n  height: auto;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.materialList {\r\n  width: 100%;\r\n  margin-top: 20px;\r\n}\r\n\r\n.materialList el-tag {\r\n  font-size: 16px;\r\n}\r\n\r\n.materialKind {\r\n  width: 100%;\r\n  /*   margin-bottom: 20px; */\r\n  text-align: left;\r\n}\r\n\r\n.materialDiv {\r\n  width: 100%;\r\n  text-align: left;\r\n}\r\n\r\n.materialBlock {\r\n  width: 150px;\r\n  height: 200px;\r\n  border-radius: 7%;\r\n  background-color: white;\r\n  margin: 20px;\r\n  display: inline-block;\r\n  position: relative;\r\n}\r\n\r\n.materialImg {\r\n  width: 150px;\r\n  height: 150px;\r\n  border-top-left-radius: 7%;\r\n  border-top-right-radius: 7%;\r\n  background-repeat: no-repeat;\r\n  background-size: contain;\r\n  background-position: center;\r\n}\r\n\r\n.plus {\r\n  position: absolute;\r\n  left: 50%;\r\n  top: 50%;\r\n  transform: translateY(-50%) translateX(-50%) scale(1.5);\r\n  color: red;\r\n}\r\n\r\n.materialBtnBlock {\r\n  width: 100%;\r\n  height: 50px;\r\n  position: relative;\r\n  float: left;\r\n}\r\n\r\n.materialBtn {\r\n  width: 50px;\r\n  height: 100%;\r\n  position: relative;\r\n  display: inline-block;\r\n}\r\n\r\n.materialBtn i {\r\n  position: absolute;\r\n  left: 50%;\r\n  top: 50%;\r\n  transform: translateY(-50%) translateX(-50%) scale(1.3);\r\n  cursor: pointer;\r\n}\r\n\r\n.alertBg {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: fixed;\r\n  left: 0;\r\n  top: 0;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  z-index: 9;\r\n}\r\n\r\n.layoutBlock {\r\n  width: 50%;\r\n  height: 50%;\r\n  background-color: white;\r\n  border-radius: 30px;\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translateX(-50%) translateY(-50%);\r\n  box-sizing: border-box;\r\n  padding: 20px;\r\n  overflow-y: auto;\r\n  text-align: left;\r\n}\r\n\r\n.addBtn {\r\n  position: absolute;\r\n  left: 20%;\r\n  bottom: 20px;\r\n}\r\n\r\n.cancelBtn {\r\n  position: absolute;\r\n  right: 20%;\r\n  bottom: 20px;\r\n}\r\n\r\n.setBtn {\r\n  position: sticky;\r\n  width: 100%;\r\n  bottom: 20px;\r\n  height: 40px;\r\n  left: 0;\r\n}\r\n\r\n.myMaterial {\r\n  width: 100px;\r\n  height: 100px;\r\n  margin: 5px;\r\n  background-size: contain;\r\n  background-repeat: no-repeat;\r\n  border-radius: 5px;\r\n  background-position: center;\r\n  border: 1px solid gray;\r\n  position: relative;\r\n  cursor: pointer;\r\n  display: inline-block;\r\n}\r\n\r\n.lock {\r\n  position: absolute;\r\n  left: 50%;\r\n  top: 50%;\r\n  transform: translateX(-50%) translateY(-50%) scale(2);\r\n  color: red;\r\n}\r\n\r\n.zoom {\r\n  background-size: 150%;\r\n}\r\n\r\n.selected {\r\n  border: 1px solid rgb(66, 158, 253);\r\n  background-size: 150%;\r\n}\r\n</style>\r\n<script>\r\n// @ is an alias to /src\r\nimport { mapState, mapActions, mapGetters } from 'vuex'\r\n// import bus from \"@/eventBus.js\"\r\nimport axios from 'axios'\r\nexport default {\r\n  name: 'structureMaterial',\r\n  props: {\r\n    structureD: {\r\n      type: Array,\r\n      default: () => []\r\n    }\r\n  },\r\n  data: function() {\r\n    return {\r\n      replaceData: [{ tagName: '主图' }, { tagName: '背景' }, { tagName: '装饰1' }],\r\n      activeName: 'first',\r\n      img: 'https://upload-images.jianshu.io/upload_images/2509688-d49b8f5bde26566d.jpeg?imageMogr2/auto-orient/strip|imageView2/2/w/640/format/webp',\r\n      addImg: false,\r\n      structure_index: 0,\r\n      structure_id: Number, // 添加图片进入裂变区域，需要骨架id和，对应位置（数字，0开始）\r\n      structure_postion: Number,\r\n      select_file_id: Number,\r\n      myMaterial: [\r\n        {\r\n          url: '',\r\n          hover: false,\r\n          select: false\r\n        }\r\n      ],\r\n      now_structureData: null,\r\n      show: false\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      api: state => state.api\r\n    }),\r\n    structureData: function() {\r\n      return this.structureD\r\n    },\r\n    first: function() {\r\n      if (this.structureData[0]) {\r\n        return `${this.structureData[0].data.id}`\r\n      } else {\r\n        return '1'\r\n      }\r\n    }\r\n  },\r\n  // beforeCreate:function(){\r\n  //   const me = this;\r\n\r\n  // },\r\n  created: function() {\r\n    const me = this\r\n    // 传递骨架数据，然后加入队列再显示\r\n    me.$set(me, 'now_structureData', this.structureD[0])\r\n    setTimeout(() => {\r\n      me.$set(me, 'show', true)\r\n    }, 0)\r\n  },\r\n  mounted: function() {\r\n    const me = this\r\n    // 初始化index为0的骨架的数据，（每个位置的替换素材）\r\n    me.getStructureImg(0)\r\n  },\r\n  methods: {\r\n    backF: function(item) {\r\n      const me = this\r\n      console.log(item)\r\n      axios({\r\n        method: 'post',\r\n        url: me.api.del_framework_material,\r\n        data: {\r\n          id: item.id\r\n        }\r\n      })\r\n        .then(function(response) {\r\n          if (response.data.code == '200') {\r\n          }\r\n        })\r\n        .catch(function(error) {})\r\n    },\r\n    addBtn() {\r\n      // 从我的素材添加图片进入 骨架替换区域\r\n      const me = this\r\n      axios({\r\n        method: 'post',\r\n        url: me.api.add_framework_material,\r\n        data: {\r\n          user_id: me.user_data.id,\r\n          material_id: me.select_file_id,\r\n          framework_id: me.structure_id,\r\n          position: me.structure_postion\r\n        }\r\n      })\r\n        .then(function(response) {\r\n          console.log(response)\r\n          if (response.data.code == '200') {\r\n            me.$message({\r\n              message: '添加成功',\r\n              type: 'success'\r\n            })\r\n            me.$set(me, 'addImg', false)\r\n            me.getStructureImg(me.structure_index)\r\n          }\r\n        })\r\n        .catch(function() {})\r\n    },\r\n    getStructureImg(index = 0) {\r\n      const me = this\r\n      let sId = me.structureData[index].data.id\r\n      axios({\r\n        method: 'get',\r\n        url: `${me.api.find_framework_info}?framework_id=${sId}`\r\n      })\r\n        .then(function(response) {\r\n          if (response.status == 200 && response.data.code == '200') {\r\n            me.$set(me, 'now_structureData', response.data)\r\n          }\r\n        })\r\n        .catch(function() {})\r\n    },\r\n    handleClick(tab, event) {\r\n      const me = this\r\n      me.$set(me, 'structure_index', parseInt(tab.index))\r\n      me.getStructureImg(me.structure_index)\r\n    },\r\n    addImgF: function(item) {\r\n      const me = this\r\n      me.$set(me, 'addImg', true)\r\n      me.$set(me, 'structure_id', item.framework_id)\r\n      me.$set(me, 'structure_postion', item.position)\r\n      // 请求我上传的图片\r\n      me.getImg()\r\n      //\r\n    },\r\n    getImg: function() {\r\n      const me = this\r\n      let id = me.user_data.id\r\n      axios({\r\n        method: 'post',\r\n        url: me.api.find_file,\r\n        data: {\r\n          id: id\r\n        }\r\n      })\r\n        .then(function(response) {\r\n          if (response.data.code == '200') {\r\n            let imgA = response.data.data\r\n            for (let i = 0; i < imgA.length; i++) {\r\n              imgA[i].hover = false\r\n              imgA[i].select = false\r\n              imgA[i].url = `${me.api.images}${imgA[i].path}`\r\n            }\r\n            me.$set(me, 'myMaterial', imgA)\r\n          }\r\n        })\r\n        .catch(function(error) {})\r\n    },\r\n    cancelBtn: function() {\r\n      const me = this\r\n      me.$set(me, 'addImg', false)\r\n    },\r\n    hoverFunc: function(index) {\r\n      const me = this\r\n      me.$set(me.myMaterial[index], 'hover', true)\r\n    },\r\n    outFunc: function(index) {\r\n      const me = this\r\n      me.$set(me.myMaterial[index], 'hover', false)\r\n    },\r\n    selectF: function(item, index) {\r\n      const me = this\r\n      if (item.status == 3) {\r\n        me.$message({\r\n          message: '该图片已经被添加，锁定',\r\n          type: 'warning'\r\n        })\r\n      } else {\r\n        for (let i = 0; i < me.myMaterial.length; i++) {\r\n          me.myMaterial[i].select = false\r\n        }\r\n        me.$set(me.myMaterial[index], 'select', true)\r\n        me.$set(me, 'select_file_id', item.id)\r\n      }\r\n    },\r\n    donwloadF: function(imgsrc) {\r\n      fetch(imgsrc).then(res =>\r\n        res.blob().then(blob => {\r\n          var a = document.createElement('a')\r\n          var url = window.URL.createObjectURL(blob)\r\n          var filename = 'myImg.png'\r\n          a.href = url\r\n          a.download = filename\r\n          a.click()\r\n          window.URL.revokeObjectURL(url)\r\n        })\r\n      )\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.8.3@vue-loader/lib/index.js??vue-loader-options!./structureMaterial.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.8.3@vue-loader/lib/index.js??vue-loader-options!./structureMaterial.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./structureMaterial.vue?vue&type=template&id=d599575a&scoped=true&\"\nimport script from \"./structureMaterial.vue?vue&type=script&lang=js&\"\nexport * from \"./structureMaterial.vue?vue&type=script&lang=js&\"\nimport style0 from \"./structureMaterial.vue?vue&type=style&index=0&id=d599575a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.8.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d599575a\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar redefine = require('../internals/redefine');\nvar has = require('../internals/has');\nvar classof = require('../internals/classof-raw');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar toPrimitive = require('../internals/to-primitive');\nvar fails = require('../internals/fails');\nvar create = require('../internals/object-create');\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar defineProperty = require('../internals/object-define-property').f;\nvar trim = require('../internals/string-trim').trim;\n\nvar NUMBER = 'Number';\nvar NativeNumber = global[NUMBER];\nvar NumberPrototype = NativeNumber.prototype;\n\n// Opera ~12 has broken Object#toString\nvar BROKEN_CLASSOF = classof(create(NumberPrototype)) == NUMBER;\n\n// `ToNumber` abstract operation\n// https://tc39.github.io/ecma262/#sec-tonumber\nvar toNumber = function (argument) {\n  var it = toPrimitive(argument, false);\n  var first, third, radix, maxCode, digits, length, index, code;\n  if (typeof it == 'string' && it.length > 2) {\n    it = trim(it);\n    first = it.charCodeAt(0);\n    if (first === 43 || first === 45) {\n      third = it.charCodeAt(2);\n      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix\n    } else if (first === 48) {\n      switch (it.charCodeAt(1)) {\n        case 66: case 98: radix = 2; maxCode = 49; break; // fast equal of /^0b[01]+$/i\n        case 79: case 111: radix = 8; maxCode = 55; break; // fast equal of /^0o[0-7]+$/i\n        default: return +it;\n      }\n      digits = it.slice(2);\n      length = digits.length;\n      for (index = 0; index < length; index++) {\n        code = digits.charCodeAt(index);\n        // parseInt parses a string to a first unavailable symbol\n        // but ToNumber should return NaN if a string contains unavailable symbols\n        if (code < 48 || code > maxCode) return NaN;\n      } return parseInt(digits, radix);\n    }\n  } return +it;\n};\n\n// `Number` constructor\n// https://tc39.github.io/ecma262/#sec-number-constructor\nif (isForced(NUMBER, !NativeNumber(' 0o1') || !NativeNumber('0b1') || NativeNumber('+0x1'))) {\n  var NumberWrapper = function Number(value) {\n    var it = arguments.length < 1 ? 0 : value;\n    var dummy = this;\n    return dummy instanceof NumberWrapper\n      // check on 1..constructor(foo) case\n      && (BROKEN_CLASSOF ? fails(function () { NumberPrototype.valueOf.call(dummy); }) : classof(dummy) != NUMBER)\n        ? inheritIfRequired(new NativeNumber(toNumber(it)), dummy, NumberWrapper) : toNumber(it);\n  };\n  for (var keys = DESCRIPTORS ? getOwnPropertyNames(NativeNumber) : (\n    // ES3:\n    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +\n    // ES2015 (in case, if modules with ES2015 Number statics required before):\n    'EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,' +\n    'MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger'\n  ).split(','), j = 0, key; keys.length > j; j++) {\n    if (has(NativeNumber, key = keys[j]) && !has(NumberWrapper, key)) {\n      defineProperty(NumberWrapper, key, getOwnPropertyDescriptor(NativeNumber, key));\n    }\n  }\n  NumberWrapper.prototype = NumberPrototype;\n  NumberPrototype.constructor = NumberWrapper;\n  redefine(global, NUMBER, NumberWrapper);\n}\n","import mod from \"-!../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/_css-loader@3.4.0@css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/_vue-loader@15.8.3@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.8.3@vue-loader/lib/index.js??vue-loader-options!./structureMaterial.vue?vue&type=style&index=0&id=d599575a&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/_css-loader@3.4.0@css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/_vue-loader@15.8.3@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.8.3@vue-loader/lib/index.js??vue-loader-options!./structureMaterial.vue?vue&type=style&index=0&id=d599575a&scoped=true&lang=css&\""],"sourceRoot":""}