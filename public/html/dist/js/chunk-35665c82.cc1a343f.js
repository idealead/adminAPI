(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35665c82"],{"002c":function(t,e,a){var r=a("5352"),n=a("76d1"),i=a("400e");r({target:"Array",proto:!0},{fill:n}),i("fill")},"0436":function(t,e,a){"use strict";var r=a("5352"),n=a("f74a"),i=a("7bac"),o=a("0fe1"),c=a("30d6"),s=a("e4ac"),l=a("1165"),_=a("2e68"),d=a("7c39"),h=d("species"),p=[].slice,v=Math.max;r({target:"Array",proto:!0,forced:!_("slice")},{slice:function(t,e){var a,r,_,d=s(this),m=c(d.length),u=o(t,m),g=o(void 0===e?m:e,m);if(i(d)&&(a=d.constructor,"function"!=typeof a||a!==Array&&!i(a.prototype)?n(a)&&(a=a[h],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return p.call(d,u,g);for(r=new(void 0===a?Array:a)(v(g-u,0)),_=0;u<g;u++,_++)u in d&&l(r,_,d[u]);return r.length=_,r}})},"0633":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAolBMVEUAAAD////////////////////////////////////////////////////////////////////////OOjr99/fdc3P++/v55ubxxsbssrLoo6Pnnp7kk5P88/P78PD66+vhg4Pfe3vbb2/ZY2PXXV3RQkLPPT344OD009Pz0NDzy8vtuLjaaGjVV1fTTEz22dnuuLjqqqrmmZnllpbUUFDTTU3YS6/8AAAAEnRSTlMABvrg2olbVKwDUvPk46umlFZnj7jmAAAA10lEQVQY02WQ6XLCMAyEZTs4CbSFriENScuRixYoN+//aijCw4Th+yF719boIEF9Do0eBMNQ0YN+AE/Q91bcQ4deLKZ4SZrl07m4xIRgDrum3F7d4ofvIdd45zN351auq/8Z8KbIskjdBsK4nHC09MGxWsDz1fwCERm+uT3rv+mY4/IbMKSR1u4y4xfHGhnnaxoAhTvi2eRhVmXynC6FWHnmtRSyrTlZQ0gKaene/KnJ2t+r7b15P+ZmVxfLyo/ZWUjeXQjFI3QYxa9LDumBspHR2kRWibwBtLoaS04h8oYAAAAASUVORK5CYII="},"1f8e":function(t,e,a){var r=a("93ef"),n=a("1ac6").trim,i=a("ed69"),o=r.parseFloat,c=1/o(i+"-0")!==-1/0;t.exports=c?function(t){var e=n(String(t)),a=o(e);return 0===a&&"-"==e.charAt(0)?-0:a}:o},2303:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAUVBMVEUAAAD////////////////////////////////////////////////////////////////////OOTn00dHffX3ji4vTTEz+/Pzhh4fTTk7ffn5WcD3NAAAAEXRSTlMAVPjgBqyJ5NumXFtR15SKB9ublw4AAACKSURBVBjTZc9ZEoMgEEXRZlBxyPCY1Ox/oQGRpJXzeQvqVdNBi1FJ+RiFpp/F4GSW2nowfdtqFcic3+3uHRKRNgYAa7BFWIFB04xks9UGYKIu/7V/DuhIpfhh0QOKZIqRxQhIYkptYnmpmujzEFPXp3sMwPDm8bxIEBeP2190gexJTTSCblQ3a8q+NJ8PB92GL/gAAAAASUVORK5CYII="},"2b36":function(t,e,a){},5183:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading&&t.firstEdit,expression:"(fullscreenLoading&&firstEdit)",modifiers:{fullscreen:!0,lock:!0}}],attrs:{id:"mainCanvas"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.right_block.show,expression:"right_block.show"}],staticClass:"mouse_right_block",style:{left:t.right_block.rb_left,top:t.right_block.rb_top}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.right_block_ass&&"designer"!=t.user_type,expression:"right_block_ass && user_type != 'designer'"}],staticClass:"mouse_right_btn right_btn_association"},[1==t.right_block.menu.ass?a("div",{on:{click:t.onRightAss}},[t._v("组合")]):2==t.right_block.menu.ass?a("div",{on:{click:t.onRight_unAss}},[t._v("取消组合")]):t._e()]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.right_block.menu.show_lock,expression:"right_block.menu.show_lock"}],staticClass:"mouse_right_btn"},[t.right_block.menu.lock?t._e():a("div",{on:{click:t.lockFunc}},[t._v(t._s(t.right_block.lock_text))]),t.right_block.menu.lock?a("div",{on:{click:t.unlockFunc}},[t._v(t._s(t.right_block.unlock_text))]):t._e()]),(t.new_structure_id,a("div",{staticClass:"mouse_right_btn",on:{click:function(e){return t.moveIndex(!0)}}},[t._v("上移")])),(t.new_structure_id,a("div",{staticClass:"mouse_right_btn",on:{click:function(e){return t.moveIndex(!1)}}},[t._v("下移")])),(t.new_structure_id,a("div",{staticClass:"mouse_right_btn",on:{click:function(e){return t.moveIndex(!0,"maxUp")}}},[t._v("置顶")])),(t.new_structure_id,a("div",{staticClass:"mouse_right_btn",on:{click:function(e){return t.moveIndex(!1,"maxDown")}}},[t._v("置底")])),t.right_block.menu.edit_text&&"designer"!=t.user_type?a("div",{staticClass:"mouse_right_btn",on:{click:t.onEdit}},[t._v("更改文字")]):t._e(),t.right_block.menu.change&&"designer"!=t.user_type?a("div",{staticClass:"mouse_right_btn",on:{click:t.changeImage}},[t._v("更换图片")]):t._e(),"designer"!=t.user_type?a("div",{staticClass:"mouse_right_btn",on:{click:function(e){return t.toImage(!1)}}},[t._v("导出图片")]):t._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:t.right_block.menu.del&&t.in_move&&!t.in_move.structure,expression:"right_block.menu.del && in_move && !in_move.structure"}],staticClass:"mouse_right_btn right_btn_delete",on:{click:t.onRightDelete}},[t._v("删除")]),"designer"==t.user_type?a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.in_move&&"text"==t.in_move.type&&"arc_title"!=t.in_move.role,expression:"\n          in_move && in_move.type == 'text' && in_move.role != 'arc_title'\n        "}],staticClass:"mouse_right_btn",on:{click:function(e){return t.setRole("arc_title")}}},[t._v("设为弧形标题")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.in_move&&"text"==t.in_move.type&&"arc_subtitle"!=t.in_move.role,expression:"\n          in_move && in_move.type == 'text' && in_move.role != 'arc_subtitle'\n        "}],staticClass:"mouse_right_btn",on:{click:function(e){return t.setRole("arc_subtitle")}}},[t._v("设为弧形副标题")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.in_move&&"image"==t.in_move.type&&"logo"!=t.in_move.role,expression:"in_move && in_move.type == 'image' && in_move.role != 'logo'"}],staticClass:"mouse_right_btn",on:{click:function(e){return t.setRole("logo")}}},[t._v("设为logo")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.in_move&&"image"==t.in_move.type&&"main"!=t.in_move.role,expression:"in_move && in_move.type == 'image' && in_move.role != 'main'"}],staticClass:"mouse_right_btn",on:{click:function(e){return t.setRole("main")}}},[t._v("设为主图")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.in_move&&"image"==t.in_move.type&&"arc_titleImg"!=t.in_move.role,expression:"\n          in_move && in_move.type == 'image' && in_move.role != 'arc_titleImg'\n        "}],staticClass:"mouse_right_btn",on:{click:function(e){return t.setRole("arc_titleImg")}}},[t._v("设为弧形标题装饰")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.in_move&&"image"==t.in_move.type&&"arc_subtitleImg"!=t.in_move.role,expression:"\n          in_move &&\n            in_move.type == 'image' &&\n            in_move.role != 'arc_subtitleImg'\n        "}],staticClass:"mouse_right_btn",on:{click:function(e){return t.setRole("arc_subtitleImg")}}},[t._v("设为弧形副标题装饰")]),t._l(t.structure_position,(function(e,r){return a("div",{directives:[{name:"show",rawName:"v-show",value:t.in_move&&"image"==t.in_move.type&&null==t.in_move.replacePosition&&""!=t.new_structure_id,expression:"\n          in_move &&\n            in_move.type == 'image' &&\n            in_move.replacePosition == null &&\n            new_structure_id != ''\n        "}],key:r,staticClass:"mouse_right_btn",on:{click:function(a){return t.setPosition(e.position)}}},[t._v('"'+t._s(e.position_name)+'"替换位置')])})),t.in_move&&"image"==t.in_move.type&&t.in_move.replacePosition>=0&&""!=t.new_structure_id&&(t.in_move.replacePosition||0==t.in_move.replacePosition)?a("div",{staticClass:"mouse_right_btn",on:{click:function(e){return t.setPosition(null)}}},[t._v("取消替换位置")]):t._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:t.in_move&&"image"==t.in_move.type&&"bg"!=t.in_move.role&&0==t.tempRoleMsg.bg,expression:"\n          in_move &&\n            in_move.type == 'image' &&\n            in_move.role != 'bg' &&\n            tempRoleMsg.bg == 0\n        "}],staticClass:"mouse_right_btn",on:{click:function(e){return t.setRole("bg")}}},[t._v("设为背景")]),a("el-dropdown",{staticClass:"mouse_right_btn",on:{command:t.handleCommand}},[a("span",{staticClass:"el-dropdown-link"},[t._v(" 文案替换 "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{staticClass:"drodown-select",attrs:{slot:"dropdown"},slot:"dropdown"},[t._l(t.textPositionArr,(function(e,r){return a("el-dropdown-item",{key:r,attrs:{command:[r,e]}},[t._v(t._s(e))])})),a("el-dropdown-item",{attrs:{command:[-1,""]}},[t._v("取消替换位置")])],2)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.in_move&&"normal"!=t.in_move.role,expression:"in_move && in_move.role != 'normal'"}],staticClass:"mouse_right_btn",on:{click:function(e){return t.setRole("normal")}}},[t._v("取消角色")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.in_move&&"text"==t.in_move.type,expression:"in_move && in_move.type == 'text'"}],staticClass:"mouse_right_btn",on:{click:function(e){return t.textReverse(null)}}},[t._v("文本倒序")])],2):t._e()]),a("transition",{attrs:{name:"slide-fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.edit_bar.btn.show,expression:"edit_bar.btn.show"}],staticClass:"edit_bar"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"编辑",placement:"right","popper-class":"tooltip"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.edit_bar.btn.edit,expression:"edit_bar.btn.edit"}],staticClass:"edit_btn editf_btn",on:{click:t.onEdit}})]),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"编辑文字",placement:"right","popper-class":"tooltip"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.edit_bar.btn.text,expression:"edit_bar.btn.text"}],staticClass:"edit_btn text_btn",class:{text_btn_active:t.edit_bar.edit_text},on:{click:function(e){return e.target!==e.currentTarget?null:t.show_text_block(e)}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.edit_bar.edit_text,expression:"edit_bar.edit_text"}],staticClass:"text_block"},[a("div",{staticClass:"block_title block_title_text"},[t._v("文 字")]),a("div",{staticClass:"text_body_block"},[a("el-row",{staticClass:"text_row"},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content text_left"},[t._v("字体")]),a("el-button",{staticClass:"text_fontFamily",on:{click:t.showFontFamily}},[t._v(t._s(t.ffName))])],1)],1),a("el-row",{staticClass:"text_row"},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content text_left"},[t._v("字号")]),a("el-input-number",{staticClass:"text_fontSize align_right",attrs:{"controls-position":"right",min:1,max:500},on:{change:t.fontSize_change},model:{value:t.edit_bar.text.fontSize,callback:function(e){t.$set(t.edit_bar.text,"fontSize",e)},expression:"edit_bar.text.fontSize"}})],1)],1),a("el-row",{staticClass:"text_row"},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content text_left"},[t._v(" 倾斜 "),a("el-switch",{staticClass:"align_right",attrs:{value:"normal"!=t.edit_bar.text.fontStyle,"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:t.fontStyle_change}})],1)])],1),a("el-row",{staticClass:"text_row"},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content text_left"},[t._v(" 加粗 "),a("el-switch",{staticClass:"align_right",attrs:{value:"normal"!=this.edit_bar.text.fontWeight,"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:t.fontWeightChange}})],1)])],1),a("el-row",{staticClass:"text_row",staticStyle:{"padding-bottom":"0"}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content text_left"},[t._v(" 字间距 "),a("el-slider",{attrs:{min:-40,max:50},on:{change:t.letterSpacing_change},model:{value:t.edit_bar.text.letterSpacing,callback:function(e){t.$set(t.edit_bar.text,"letterSpacing",e)},expression:"edit_bar.text.letterSpacing"}})],1)])],1),a("el-row",{staticClass:"text_row",staticStyle:{"padding-bottom":"0"}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content text_left"},[t._v(" 行间距 "),a("el-slider",{attrs:{min:-30,max:100},on:{change:t.leading_change},model:{value:t.edit_bar.text.leading,callback:function(e){t.$set(t.edit_bar.text,"leading",e)},expression:"edit_bar.text.leading"}})],1)])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.edit_bar.edit_fontFamily_select,expression:"edit_bar.edit_fontFamily_select"}],staticClass:"fontFamily_select"},[a("div",{staticClass:"block_title block_title_text"},[t._v("字 体")]),a("div",{staticClass:"fontFamily_body_block"},t._l(t.edit_bar.fontFamily,(function(e){return a("div",{key:e.value,staticClass:"fontFamily_option",style:{"font-family":e.value},on:{click:function(a){return t.fontFamily_change(e.value)}}},[t._v(t._s(e.name))])})),0)])])])]),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"颜色",placement:"right","popper-class":"tooltip"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.edit_bar.btn.color,expression:"edit_bar.btn.color"}],staticClass:"edit_btn color_btn",class:{color_btn_active:t.edit_bar.edit_color},on:{click:function(e){return e.target!==e.currentTarget?null:t.showColorBlock(e)}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.edit_bar.edit_color,expression:"edit_bar.edit_color"}],staticClass:"align_block"},[a("div",{staticClass:"block_title"},[t._v("颜 色")]),a("div",{staticClass:"align_body_block"},[a("el-row",{},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"block text_left"},[a("el-color-picker",{staticClass:"align_right font_color_picker",attrs:{"popper-class":"font_color"},on:{"active-change":t.fontColor_change},model:{value:t.edit_bar.text.color,callback:function(e){t.$set(t.edit_bar.text,"color",e)},expression:"edit_bar.text.color"}})],1)])],1)],1)])])]),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"对齐",placement:"right","popper-class":"tooltip"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.edit_bar.btn.align,expression:"edit_bar.btn.align"}],staticClass:"edit_btn align_btn",class:{align_btn_active:t.edit_bar.edit_align},on:{click:function(e){return e.target!==e.currentTarget?null:t.showEditAlign(e)}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.edit_bar.edit_align,expression:"edit_bar.edit_align"}],staticClass:"align_block"},[a("div",{staticClass:"block_title"},[t._v("对 齐")]),a("div",{staticClass:"align_body_block"},[a("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content"},[a("div",{staticClass:"location_in_btn align_left",on:{click:function(e){return t.alignChange("left")}}})])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content"},[a("div",{staticClass:"location_in_btn align_center",on:{click:function(e){return t.alignChange("center")}}})])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content"},[a("div",{staticClass:"location_in_btn align_right_img",on:{click:function(e){return t.alignChange("right")}}})])])],1)],1)])])]),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"阴影",placement:"right","popper-class":"tooltip"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.edit_bar.btn.shadow,expression:"edit_bar.btn.shadow"}],staticClass:"edit_btn shadow_btn",class:{shadow_btn_active:t.edit_bar.edit_shadow},on:{click:function(e){return e.target!==e.currentTarget?null:t.showEditShadow(e)}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.edit_bar.edit_shadow,expression:"edit_bar.edit_shadow"}],staticClass:"shadow_block"},[a("div",{staticClass:"block_title"},[t._v("阴 影")]),a("div",{staticClass:"shadow_body_block"},[a("el-row",{staticClass:"text_row"},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content text_left"},[t._v(" 开启阴影 "),a("el-switch",{staticClass:"align_right",attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:t.dropShadow},model:{value:t.edit_bar.text.dropShadow,callback:function(e){t.$set(t.edit_bar.text,"dropShadow",e)},expression:"edit_bar.text.dropShadow"}})],1)])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.edit_bar.text.dropShadow,expression:"edit_bar.text.dropShadow"}]},[a("el-row",{staticClass:"text_row"},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"block text_left"},[t._v(" 阴影颜色 "),a("el-color-picker",{staticClass:"align_right shadow_color_picker",attrs:{"color-format":"hex",size:"small","popper-class":"font_color shadow_color"},on:{"active-change":t.dropShadowColorChange},model:{value:t.edit_bar.text.dropShadowColor,callback:function(e){t.$set(t.edit_bar.text,"dropShadowColor",e)},expression:"edit_bar.text.dropShadowColor"}})],1)])],1),a("el-row",{staticClass:"text_row"},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content text_left"},[t._v(" 阴影模糊 "),a("el-slider",{attrs:{min:0,max:20},on:{change:t.dropShadowBlurChange},model:{value:t.edit_bar.text.dropShadowBlur,callback:function(e){t.$set(t.edit_bar.text,"dropShadowBlur",e)},expression:"edit_bar.text.dropShadowBlur"}})],1)])],1),a("el-row",{staticClass:"text_row"},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content text_left"},[t._v(" 阴影距离 "),a("el-slider",{attrs:{min:0,max:30},on:{change:t.dropShadowDistanceChange},model:{value:t.edit_bar.text.dropShadowDistance,callback:function(e){t.$set(t.edit_bar.text,"dropShadowDistance",e)},expression:"edit_bar.text.dropShadowDistance"}})],1)])],1)],1)],1)])])]),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"更换图片",placement:"right","popper-class":"tooltip"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.edit_bar.btn.change_image,expression:"edit_bar.btn.change_image"}],staticClass:"edit_btn changef_btn",on:{click:t.changeImage}})]),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"位置",placement:"right","popper-class":"tooltip"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.edit_bar.btn.location,expression:"edit_bar.btn.location"}],staticClass:"edit_btn location_btn",class:{location_btn_active:t.edit_bar.edit_location},on:{click:function(e){return e.target!==e.currentTarget?null:t.showEditLocation(e)}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.edit_bar.edit_location,expression:"edit_bar.edit_location"}],staticClass:"location_block"},[a("div",{staticClass:"block_title"},[t._v("位 置")]),a("div",{staticClass:"location_body_block"},[a("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content"},[a("div",{staticClass:"location_in_btn location_left",on:{click:function(e){return t.locationMove("left")}}})])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content"},[a("div",{staticClass:"location_in_btn location_center",on:{click:function(e){return t.locationMove("center")}}})])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content"},[a("div",{staticClass:"location_in_btn location_right",on:{click:function(e){return t.locationMove("right")}}})])])],1),a("el-row",{staticClass:"row-bg",staticStyle:{"margin-top":"2px"},attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content"},[a("div",{staticClass:"location_in_btn location_top",on:{click:function(e){return t.locationMove("up")}}})])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content"},[a("div",{staticClass:"location_in_btn location_middle",on:{click:function(e){return t.locationMove("middle")}}})])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content"},[a("div",{staticClass:"location_in_btn location_bottom",on:{click:function(e){return t.locationMove("down")}}})])])],1)],1)])])]),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"旋转",placement:"right","popper-class":"tooltip"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.edit_bar.btn.rotation,expression:"edit_bar.btn.rotation"}],staticClass:"edit_btn rotation_btn",class:{rotation_btn_active:t.edit_bar.edit_rotation},on:{click:function(e){return e.target!==e.currentTarget?null:t.show_rotation_block(e)}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.edit_bar.edit_rotation,expression:"edit_bar.edit_rotation"}],staticClass:"rotation_block"},[a("div",{staticClass:"block_title"},[t._v("旋 转")]),a("div",{staticClass:"rotation_body_block"},[a("el-slider",{attrs:{min:-180,max:180,"show-tooltip":!1},on:{change:t.rotationChange},model:{value:t.edit_bar.rotation,callback:function(e){t.$set(t.edit_bar,"rotation",e)},expression:"edit_bar.rotation"}}),a("p",[t._v(t._s(t.edit_bar.rotation)+"°")])],1)])])]),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"倾斜",placement:"right","popper-class":"tooltip"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.edit_bar.btn.skew,expression:"edit_bar.btn.skew"}],staticClass:"edit_btn skew_btn",class:{skew_btn_active:t.edit_bar.edit_skew},on:{click:function(e){return e.target!==e.currentTarget?null:t.show_skew_block(e)}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.edit_bar.edit_skew,expression:"edit_bar.edit_skew"}],staticClass:"skew_block"},[a("div",{staticClass:"block_title"},[t._v("倾斜")]),a("div",{staticClass:"skew_body_block"},[a("p",[t._v("X轴倾斜")]),a("el-slider",{attrs:{min:-1,max:1,"show-tooltip":!0,step:.1},on:{change:function(e){return t.skewChange("x")}},model:{value:t.edit_bar.skewX,callback:function(e){t.$set(t.edit_bar,"skewX",e)},expression:"edit_bar.skewX"}}),a("p",[t._v("Y轴倾斜")]),a("el-slider",{attrs:{min:-1,max:1,"show-tooltip":!0,step:.1},on:{change:function(e){return t.skewChange("y")}},model:{value:t.edit_bar.skewY,callback:function(e){t.$set(t.edit_bar,"skewY",e)},expression:"edit_bar.skewY"}})],1)])])]),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"透明度",placement:"right","popper-class":"tooltip"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.edit_bar.btn.opacity,expression:"edit_bar.btn.opacity"}],staticClass:"edit_btn opacity_btn",class:{opacity_btn_active:t.edit_bar.edit_opacity},on:{click:function(e){return e.target!==e.currentTarget?null:t.show_opacity_block(e)}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.edit_bar.edit_opacity,expression:"edit_bar.edit_opacity"}],staticClass:"opacity_block"},[a("div",{staticClass:"block_title"},[t._v("透 明 度")]),a("div",{staticClass:"opacity_body_block"},[a("el-slider",{staticClass:"opacity_slider",attrs:{"show-tooltip":!1},on:{change:t.opacity_change},model:{value:t.edit_bar.opacity,callback:function(e){t.$set(t.edit_bar,"opacity",e)},expression:"edit_bar.opacity"}}),a("p",[t._v(t._s(t.edit_bar.opacity)+"%")])],1)])])]),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"色相",placement:"right","popper-class":"tooltip"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.edit_bar.btn.hue,expression:"edit_bar.btn.hue"}],staticClass:"edit_btn hue_btn",class:{hue_btn_active:t.edit_bar.edit_hue},on:{click:function(e){return e.target!==e.currentTarget?null:t.show_hue_block(e)}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.edit_bar.edit_hue,expression:"edit_bar.edit_hue"}],staticClass:"hue_block"},[a("div",{staticClass:"block_title"},[t._v("色相")]),a("div",{staticClass:"hue_body_block"},[a("el-slider",{staticClass:"opacity_slider",attrs:{"show-tooltip":!0,min:0,max:1,step:.05},on:{change:t.changeHue},model:{value:t.edit_bar.hue,callback:function(e){t.$set(t.edit_bar,"hue",e)},expression:"edit_bar.hue"}})],1)])])]),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"层级",placement:"right","popper-class":"tooltip"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.edit_bar.btn.updown,expression:"edit_bar.btn.updown"}],staticClass:"edit_btn upDown_btn",class:{upDown_btn_active:t.edit_bar.edit_layer},on:{click:t.showLayerBlock}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.edit_bar.edit_layer,expression:"edit_bar.edit_layer"}],staticClass:"layer_block"},[a("div",{staticClass:"block_title"},[t._v("图 层")]),a("div",{staticClass:"layer_body_block"},[a("div",{staticClass:"up_btn",on:{click:function(e){return t.moveIndex(!0)}}},[a("div",{staticClass:"up_btn_logo"}),a("p",{staticClass:"btn_p"},[t._v("上移")])]),a("div",{staticClass:"down_btn",on:{click:function(e){return t.moveIndex(!1)}}},[a("div",{staticClass:"down_btn_logo"}),a("p",{staticClass:"btn_p"},[t._v("下移")])]),a("div",{staticClass:"up_btn maxUp_btn",on:{click:function(e){return t.moveIndex(!0,"maxUp")}}},[a("div",{staticClass:"maxUp_btn_logo"}),a("p",{staticClass:"btn_p"},[t._v("置顶")])]),a("div",{staticClass:"down_btn maxDown_btn",on:{click:function(e){return t.moveIndex(!1,"maxDown")}}},[a("div",{staticClass:"maxDown_btn_logo"}),a("p",{staticClass:"btn_p"},[t._v("置底")])])])])])]),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"删除",placement:"right","popper-class":"tooltip"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.edit_bar.btn.delete,expression:"edit_bar.btn.delete"}],staticClass:"edit_btn delete_btn",on:{click:t.onRightDelete}})])],1)]),a("div",{staticClass:"mouldFuncButton"},["designer"==t.user_type?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"添加文案替换功能",placement:"top"}},[a("div",{staticClass:"replaceTextButton funcButton",on:{click:t.setReplaceText}})]):t._e(),a("div",{staticClass:"addButton funcButton",on:{click:function(e){return t.addPopShow(!0)}}})],1),a("addPop",{directives:[{name:"show",rawName:"v-show",value:t.addPop,expression:"addPop"}]}),t.mouldFuncShow?a("mould-func",{attrs:{"open-block":t.openF,"text-position-arr":t.textPositionArr},on:{"update-text-position":t.updateTextPosition,"close-mould-funcshow":function(e){t.mouldFuncShow=!1}},model:{value:t.saveTextRule,callback:function(e){t.saveTextRule=e},expression:"saveTextRule"}}):t._e(),a("div",{staticClass:"bottom_f"},[a("div",{staticClass:"bottom_f_btn"},[t._v(t._s(t.canvas_ratio_arr[0])+":"+t._s(t.canvas_ratio_arr[1]))]),a("div",{staticClass:"bottom_f_btn",on:{click:t.showRuler}},[a("div",{staticClass:"ruler"})]),a("div",{staticClass:"bottom_f_btn",on:{click:function(e){return t.moveActiveLog("prev")}}},[a("div",{staticClass:"prevBtn"})]),a("div",{staticClass:"bottom_f_btn",on:{click:function(e){return t.moveActiveLog("next")}}},[a("div",{staticClass:"nextBtn"})]),a("div",{staticClass:"bottom_f_btn"},[a("span",{staticClass:"reduce_scale",on:{click:function(e){return t.canvasScale("reduce")}}},[t._v("-")]),a("span",[t._v(t._s(parseInt(100*t.canvas_scale))+"%")]),a("span",{staticClass:"plus_scale",on:{click:function(e){return t.canvasScale("plus")}}},[t._v("+")])])])],1)},n=[],i=(a("3acb"),a("bfa6"),a("cf78"),a("536e"),a("002c"),a("c9a0"),a("cb1d"),a("dbe6"),a("e314"),a("0436"),a("57d6"),a("6763"),a("82a7"),a("f32a"),a("20a8"),a("9b70"),a("9757"),a("068d"),a("d961"),a("c4e7"),a("f8e0"),a("5f5a"),a("ae69"),a("dced"),a("ac74"),a("69af"),a("90e5"),a("fd4b")),o=a("2ff6"),c=a("9d37"),s=a("075f"),l=a("08c1"),d=a("0c12"),h=a("2427"),p=a.n(h),v=(a("d314"),{name:"computed_func",LENGTH_SIZE:function(t,e){var a=e.x-t.x,r=e.y-t.y,n=Math.sqrt(a*a+r*r);return n},AFTER_ROTATE:function(t){var e=t[0],a=t[1],r=t[2],n=Math.sqrt(e*e+a*a),i=e/n,o=a/n,c=Math.cos(r),s=Math.sin(r),l=i*c-o*s,_=o*c+i*s;return t[0]=n*l,t[1]=n*_,t}}),m={methods:{onRightC:function(t){var e=this;t.stopped=!0;var a=document.body.clientWidth,r=document.body.clientHeight,n=e.canvas_scale,i=a/2-e.window_w*n/2+t.data.global.x*n,o=t.data.global.y*n;if(o+300+80>=r+parseInt(document.getElementById("mainCanvas").scrollTop)&&(o=r-310+parseInt(document.getElementById("mainCanvas").scrollTop)),i+160>=a&&(i=a-160),e.$set(e.right_block,"rb_left","".concat(i,"px")),e.$set(e.right_block,"rb_top","".concat(o,"px")),e.$set(e.right_block,"show",!0),"text"==t.currentTarget.type||"image"==t.currentTarget.type){for(var c=!1,s=!1,l=0;l<e.ctrl_arr.length;l++)e.ctrl_arr[l].name==t.currentTarget.name&&(c=!0),""==e.ctrl_arr[l].association_name&&(s=!0);if(""==t.currentTarget.association_name)if(c){if(c){var _={type:2};e.onRightFunc(_,t)}}else{var d={type:1,currentTarget:t.currentTarget,data:t.data};e.onRightFunc(d)}else if(s){var h={type:2};e.onRightFunc(h,t)}else{var p={type:3};e.onRightFunc(p,t)}}else if("association_gap"==t.currentTarget.type){var v={type:2};e.onRightFunc(v,t)}else if("association_gap_notT"==t.currentTarget.type){var m={type:3};e.onRightFunc(m,t)}},normalStart:function(t,e){var a=this;if(a.clearTemporary(),a.in_move=t,t.lock)a.containerLine(t,!1,!0,!1,!0),a.$set(a.edit_bar.btn,"show",!1);else{t.data=e,t.dragging=!0;var r=t.data.getLocalPosition(a.mainStage_container);t.deviationX=r.x-t.parent.x,t.deviationY=r.y-t.parent.y,a.containerLine(t,!1,!0),a.showEdit(t.type)}},onDragStart:function(t){var e=this,a=t.currentTarget;if(!e.key_ctrlf.isDown||e.key_ctrlf.isUp||a.lock||a.structure){"image"!=a.type&&"text"!=a.type||(e.in_move=a);var r=!1;""!==a.association_name?(e.temporary_rect&&e.cancelInMove(),e.ctrl_arr.length=0,e.addACtrlarr(a.association_name)):e.click_ass_id="";for(var n=0;n<e.ctrl_arr.length;n++)if(e.ctrl_arr[n].name==a.name){r=!0;break}r?e.temporary_rect?e.ctrlDeviation(t.data,!0):e.temporary_rect||""===a.association_name||(a.association_name==e.click_ass_id&&""!==e.click_ass_id&&e.in_move?e.aSingleClick(a,t.data):(e.in_move=null,e.ctrl_arr[0].lock?e.onAssociationStart(t,!0,!0):e.onAssociationStart(t))):e.normalStart(a,t.data)}else if(0!=e.ctrl_arr.length||e.in_move.name===a.name||e.in_move.lock||e.in_move.structure){if(e.ctrl_arr.length>=2&&!e.ctrl_arr[0].lock){var i=!1;if(0==a.association_name.length){for(var o=0;o<e.ctrl_arr.length;o++)e.ctrl_arr[o].name==a.name&&(i=!0,e.removeLine(e.ctrl_arr[o].name),e.ctrl_arr.splice(o,1));0==i&&e.ctrl_arr.push(a),e.findMinAndAdd(t.data)}else if(""!==a.association_name){var c=e.setCtrlArrAssname();if(1==c.length)a.association_name!==c[0]&&(c=e.ctrlAddAss(a.association_name,c),e.findMinAndAdd(t.data,c.length));else if(c.length>1){for(var s=!1,l=0;l<c.length;l++)if(c[l]==a.association_name){s=!0;break}c=s?e.ctrlDisAss(a.association_name,c):e.ctrlAddAss(a.association_name,c),e.findMinAndAdd(t.data,c.length,c[0])}}}}else e.ctrl_arr.push(e.in_move),0==a.association_name.length&&e.ctrl_arr.push(a),e.findMinAndAdd(t.data)},onDragMove:function(t){var e=this,a=t.currentTarget;if(e.ctrl_arr&&e.ctrl_arr.length>0){for(var r=0;r<e.ctrl_arr.length;r++)if(e.ctrl_arr[r].dragging){var n=e.ctrl_arr[r].data.getLocalPosition(e.mainStage_container);if("association_gap_notT"==e.ctrl_arr[r].type){e.ctrl_arr[r].x=n.x-e.ctrl_arr[r].deviationX,e.ctrl_arr[r].y=n.y-e.ctrl_arr[r].deviationY;var i=[e.ctrl_arr[r].width/2,e.ctrl_arr[r].height/2,e.ctrl_arr[r].rotation];i=v.AFTER_ROTATE(i),e.ctrl_arr[r].centerX=e.ctrl_arr[r].x+parseFloat(i[0]),e.ctrl_arr[r].centerY=e.ctrl_arr[r].y+parseFloat(i[1]),e.moveOutLine(e.ctrl_arr[r].centerX,e.ctrl_arr[r].centerY,e.ctrl_arr[r])}else e.ctrl_arr[r].parent.x=n.x-e.ctrl_arr[r].deviationX,e.ctrl_arr[r].parent.y=n.y-e.ctrl_arr[r].deviationY,e.moveOutLine(e.ctrl_arr[r].parent.x,e.ctrl_arr[r].parent.y,e.ctrl_arr[r]);n=null}if(a.association_name==e.click_ass_id&&a.dragging&&(e.click_ass_id=""),e.temporary_rect&&e.temporary_rect.dragging){var o=e.temporary_rect.data.getLocalPosition(e.mainStage_container);e.temporary_rect.x=o.x-e.temporary_rect.deviationX,e.temporary_rect.y=o.y-e.temporary_rect.deviationY;var c=[e.temporary_rect.width/2,e.temporary_rect.height/2,e.temporary_rect.rotation];c=v.AFTER_ROTATE(c),e.temporary_rect.centerX=e.temporary_rect.x+parseFloat(c[0]),e.temporary_rect.centerY=e.temporary_rect.y+parseFloat(c[1]),e.moveOutLine(e.temporary_rect.centerX,e.temporary_rect.centerY,e.temporary_rect),o=null}}else if(a.dragging&&!a.structure){var s=a.data.getLocalPosition(e.mainStage_container);a.parent.position.set(s.x-a.deviationX,s.y-a.deviationY),e.moveOutLine(s.x-a.deviationX,s.y-a.deviationY,a),s=null}a=null},onDragEnd:function(t){var e=this,a=t.currentTarget;a.dragging=!1,a.data=null,e.$set(e,"after_move",!0);for(var r=0;r<e.ctrl_arr.length;r++)e.ctrl_arr[r].dragging=!1,e.ctrl_arr[r].data=null;a.lock||(""!==e.click_ass_id&&e.click_ass_id==a.association_name&&"btn"!==a.type&&"association_gap_notT"!==a.type&&(e.in_move=a,e.aSingleClickBorder(a.association_name)),""==e.click_ass_id&&""!==a.association_name&&(e.click_ass_id=a.association_name),""!==a.association_name&&"association_gap_notT"!==a.type&&e.in_move&&e.aSingleClickBorder(a.association_name)),e.temporary_rect&&e.temporary_rect.dragging&&(e.temporary_rect.dragging=!1,e.temporary_rect.data=null);for(var n=0;n<e.ctrl_arr.length;n++)e.ctrl_arr[n].dragging=!1,e.ctrl_arr[n].data=null;e.pushActiveLog(),e=null,a=null},onScaleStart:function(t){var e=this;if(t.target.data=t.data,e.in_move.dragging=!1,e.can_scale=1,""!==e.in_move.association_name)for(var a=0;a<e.ctrl_arr.length;a++)if("association_gap_notT"==e.ctrl_arr[a].type&&e.ctrl_arr[a].association_name==e.in_move.association_name){e.ctrl_arr[a].change=!0;break}if("text"==e.in_move.type){var r=e.in_move.width/e.in_move.style.fontSize;e.in_move.text_num=r}e=null},onScaleMove:function(t,e){var a=this;if(a.can_scale){var r=e.data.getLocalPosition(a.mainStage_container),n=v.LENGTH_SIZE({x:a.in_move.parent.position.x,y:a.in_move.parent.position.y},r);"text"==a.in_move.type?a.textTime&&(a.textTime=!1,a.scaleAll(n,a.in_move.text_num),a.$nextTick((function(){a.textTime=!0}))):a.scaleAll(n),a.after_scale=!0,r=null,n=null}},scaleAll:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=this;if(!(t<=0)){var r,n;r=a.in_move.originalw/2,n=a.in_move.originalh/2;var i=Math.sqrt(r*r+n*n),o=t/i;if(o<=.1&&(o=.1),"text"==a.in_move.type){var c=a.in_move.ofonts*o,s=a.in_move.style.clone();s.wordWrapWidth=(c+a.in_move.style.letterSpacing)*e,s.fontSize=Math.floor(c),s.lineHeight=a.in_move.style.fontSize+a.in_move.lineHeightM,a.in_move.style=s,c=null,s=null}else a.in_move.svg?a.in_move.scale.set(o/a.in_move.texture.baseTexture.resource.scale):a.in_move.scale.set(o),a.moveIcon(a.in_move);a.forChangeAssociation(a.in_move.association_name),i=null,o=null,n=null,r=null,a=null}},onScaleEnd:function(){var t=this;if(t.can_scale=0,""!==t.in_move.association_name)for(var e=function(e){"association_gap_notT"==t.ctrl_arr[e].type&&t.ctrl_arr[e].change&&t.in_move.association_name==t.ctrl_arr[e].association_name&&t.$nextTick((function(){t.aSingleClickBorder(t.ctrl_arr[e].association_name)}))},a=0;a<t.ctrl_arr.length;a++)e(a);t.containerLine(t.in_move,!1,!0),"text"==t.in_move.type?(t.edit_bar.text.fontSize=t.in_move.style.fontSize,t.scaleTextEnd(t.in_move)):t.in_move.svg&&t.updateSvgScale(t.in_move),t.pushActiveLog()},onRotateStart:function(){var t=this;if(t.in_move.dragging=!1,t.can_rotate=1,""!==t.in_move.association_name)for(var e=0;e<t.ctrl_arr.length;e++)if("association_gap_notT"==t.ctrl_arr[e].type&&t.ctrl_arr[e].association_name==t.in_move.association_name){t.ctrl_arr[e].change=!0;break}t=this},onRotateMove:function(t){var e=this;if(e.can_rotate){var a=t.data.getLocalPosition(e.mainStage_container),r={x:0};r.y=-e.in_move.height/2-e.r_btn_h;var n,i={};i.x=a.x-e.in_move.parent.position.x,i.y=a.y-e.in_move.parent.position.y;var o=r.x*i.x+r.y*i.y,c=Math.sqrt(r.x*r.x+r.y*r.y)*Math.sqrt(i.y*i.y+i.x*i.x);n=o/c,e.rotateOBj(Math.acos(n),a.x),e.$set(e,"after_rotate",!0)}e=null},rotateOBj:function(t,e){var a=this;e-a.in_move.parent.position.x>=0?(a.in_move.rotation=t,a.outLine_container.getChildByName(a.in_move.name).rotation=t):(a.in_move.rotation=-t,a.outLine_container.getChildByName(a.in_move.name).rotation=-t),a.forChangeAssociation(a.in_move.association_name),a=null},onRotateEnd:function(){var t=this;if(t.in_move.rotation_num=t.in_move.rotation,t.can_rotate=0,""!==t.in_move.association_name)for(var e=0;e<t.ctrl_arr.length;e++)"association_gap_notT"==t.ctrl_arr[e].type&&t.in_move.association_name==t.ctrl_arr[e].association_name&&t.aSingleClickBorder(t.ctrl_arr[e].association_name);t.pushActiveLog(),t=null},onStretchStart:function(t){var e=this;e.in_move.dragging=!1,e.can_scale=0,e.can_rotate=0,e.can_stretch=1,e=null},onStretchMove:function(t){var e=this;if(e.can_stretch){var a=t.data.getLocalPosition(e.mainStage_container),r=e.in_move.parent.position.x,n=2*(a.x-r);n>e.in_move.style.fontSize&&(e.in_move.style.wordWrapWidth=n,e.moveIcon(e.in_move)),e.$set(e,"after_stretch",!0)}e=null},onStretchEnd:function(){var t=this;t.can_stretch=0,t.in_move.originalw=t.in_move.width,t.in_move.originalh=t.in_move.height,t.in_move.ofonts=t.in_move.style.fontSize,t.containerLine(t.in_move,!1,!0),""!==t.in_move.association_name&&t.aSingleClickBorder(t.in_move.association_name),t.pushActiveLog(),t=null},onTemporaryStart:function(t){var e=this;e.ctrlDeviation(t.data,!0),e=null},onTemporaryEnd:function(){for(var t=this,e=function(e){t.ctrl_arr[e].dragging=!1,t.ctrl_arr[e].data=null,"association_gap_notT"==t.ctrl_arr[e].type&&(setTimeout((function(){t.ctrl_arr[e].centerX=(t.ctrl_arr[e].vertexData[0]+t.ctrl_arr[e].vertexData[6])/2-(t.window_w-t.canvas_width)/2,t.ctrl_arr[e].centerY=(t.ctrl_arr[e].vertexData[1]+t.ctrl_arr[e].vertexData[7])/2-(t.window_h-t.canvas_height)/2,t.moveOutLine(t.ctrl_arr[e].centerX,t.ctrl_arr[e].centerY,t.ctrl_arr[e]),t.ctrl_arr[e].change=!1}),150),""==t.click_ass_id&&(t.click_ass_id=t.ctrl_arr[e].association_name))},a=0;a<t.ctrl_arr.length;a++)e(a);t.temporary_rect&&(t.temporary_rect.dragging=!1,t.temporary_rect.data=null,setTimeout((function(){t.temporary_rect.centerX=(t.temporary_rect.vertexData[0]+t.temporary_rect.vertexData[6])/2-(t.window_w-t.canvas_width)/2,t.temporary_rect.centerY=(t.temporary_rect.vertexData[1]+t.temporary_rect.vertexData[7])/2-(t.window_h-t.canvas_height)/2,t.moveOutLine(t.temporary_rect.centerX,t.temporary_rect.centerY,t.temporary_rect)}),150)),t.pushActiveLog()},onTScaleStart:function(t){var e=this;t.target.data=t.data,e.can_scale=1;for(var a=[],r=0;r<e.ctrl_arr.length;r++)if(e.ctrl_arr[r].oScale=e.ctrl_arr[r].scale.x,"association_gap_notT"==e.ctrl_arr[r].type)a.push({index:r,x:e.ctrl_arr[r].position.x,y:e.ctrl_arr[r].position.y});else{if("text"==e.ctrl_arr[r].type){var n=e.ctrl_arr[r].width/e.ctrl_arr[r].style.fontSize;e.ctrl_arr[r].text_num=n,e.ctrl_arr[r].ratio=2*(-e.temporary_rect.x+e.temporary_rect.centerX)/e.ctrl_arr[r].width}a.push({index:r,x:e.ctrl_arr[r].parent.position.x,y:e.ctrl_arr[r].parent.position.y})}t.target.pivotX=e.temporary_rect.centerX,t.target.pivotY=e.temporary_rect.centerY,t.target.temporary_rectX=e.temporary_rect.x,t.target.temporary_rectY=e.temporary_rect.y,t.target.ctrl_arr_pivot=a,e.temporary_rect.oScale=e.temporary_rect.scale.x,e=null},onTScaleMove:function(t,e){var a=this;if(a.can_scale){var r=e.data.getLocalPosition(a.mainStage_container),n=v.LENGTH_SIZE({x:a.temporary_rect.centerX,y:a.temporary_rect.centerY},r);a.tScaleAll(n,t),a.$set(a,"after_scale",!0)}a=null},tScaleAll:function(t,e,a){var r=this;if(!(t<=0)){var n,i;n=r.temporary_rect.originalw/2,i=r.temporary_rect.originalh/2;var o=Math.sqrt(n*n+i*i),c=t/o;c<=.1&&(c=.1),r.temporary_rect.scale.set(c*r.temporary_rect.oScale),r.temporary_rect.x=e.pivotX-(e.pivotX-e.temporary_rectX)*c,r.temporary_rect.y=e.pivotY-(e.pivotY-e.temporary_rectY)*c,r.moveIcon(r.temporary_rect);for(var s=0;s<r.ctrl_arr.length;s++)if("association_gap_notT"==r.ctrl_arr[s].type)r.ctrl_arr[s].scale.set(c*r.ctrl_arr[s].oScale),r.ctrl_arr[s].x=e.pivotX-(e.pivotX-e.ctrl_arr_pivot[s].x)*c,r.ctrl_arr[s].y=e.pivotY-(e.pivotY-e.ctrl_arr_pivot[s].y)*c;else if("text"==r.ctrl_arr[s].type){var l=r.ctrl_arr[s].ofonts*c;r.ctrl_arr[s].style.wordWrapWidth=(l+r.ctrl_arr[s].style.letterSpacing)*r.ctrl_arr[s].text_num,r.ctrl_arr[s].style.fontSize=l,r.$set(r.edit_bar.text,"fontSize",l),r.ctrl_arr[s].style.lineHeight=r.ctrl_arr[s].style.fontSize+r.ctrl_arr[s].lineHeightM,r.ctrl_arr[s].parent.x=e.pivotX-(e.pivotX-e.ctrl_arr_pivot[s].x)*c,r.ctrl_arr[s].parent.y=e.pivotY-(e.pivotY-e.ctrl_arr_pivot[s].y)*c}else r.ctrl_arr[s].svg?r.ctrl_arr[s].scale.set(c):r.ctrl_arr[s].scale.set(c*r.ctrl_arr[s].oScale),r.ctrl_arr[s].parent.x=e.pivotX-(e.pivotX-e.ctrl_arr_pivot[s].x)*c,r.ctrl_arr[s].parent.y=e.pivotY-(e.pivotY-e.ctrl_arr_pivot[s].y)*c;e=null,r=null}},onTScaleEnd:function(){var t=this;t.can_scale=0,t.temporary_rect.originalw=t.temporary_rect.width,t.temporary_rect.originalh=t.temporary_rect.height;for(var e=function(e){"text"==t.ctrl_arr[e].type?t.scaleTextEnd(t.ctrl_arr[e]):t.ctrl_arr[e].svg&&t.updateSvgScale(t.ctrl_arr[e]),setTimeout((function(){t.ctrl_arr[e].centerX=(t.ctrl_arr[e].vertexData[0]+t.ctrl_arr[e].vertexData[6])/2-(t.window_w-t.canvas_width)/2,t.ctrl_arr[e].centerY=(t.ctrl_arr[e].vertexData[1]+t.ctrl_arr[e].vertexData[7])/2-(t.window_h-t.canvas_height)/2,e==t.ctrl_arr.length-1&&t.renderTLine(!0)}),150)},a=0;a<t.ctrl_arr.length;a++)e(a);t.pushActiveLog()},onTRotateStart:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=this;t.temporary_rect.dragging=!1,t.temporary_rect.beforeRX=t.temporary_rect.x,t.temporary_rect.beforeRY=t.temporary_rect.y;for(var e=0;e<t.ctrl_arr.length;e++)t.ctrl_arr[e].dragging=!1,t.ctrl_arr[e].data=null,"association_gap_notT"==t.ctrl_arr[e].type?(t.ctrl_arr[e].beforeRX=t.ctrl_arr[e].x,t.ctrl_arr[e].beforeRY=t.ctrl_arr[e].y,t.ctrl_arr[e].pivot.set((t.temporary_rect.centerX-t.ctrl_arr[e].x)/t.ctrl_arr[e].scale.x,(t.temporary_rect.centerY-t.ctrl_arr[e].y)/t.ctrl_arr[e].scale.y),t.ctrl_arr[e].x=t.temporary_rect.centerX,t.ctrl_arr[e].y=t.temporary_rect.centerY):(t.ctrl_arr[e].beforeRX=t.ctrl_arr[e].parent.x,t.ctrl_arr[e].beforeRY=t.ctrl_arr[e].parent.y,t.ctrl_arr[e].parent.pivot.set((t.temporary_rect.centerX-t.ctrl_arr[e].parent.position.x)/1,(t.temporary_rect.centerY-t.ctrl_arr[e].parent.position.y)/1),t.ctrl_arr[e].parent.x=t.temporary_rect.centerX,t.ctrl_arr[e].parent.y=t.temporary_rect.centerY);t.temporary_rect.pivot.set(t.temporary_rect.width/2/t.temporary_rect.scale.x,t.temporary_rect.height/2/t.temporary_rect.scale.y),t.temporary_rect.x=t.temporary_rect.centerX,t.temporary_rect.y=t.temporary_rect.centerY,t.can_rotate=1,t=null},onTRotateMove:function(t){var e=this;if(e.can_rotate){var a=t.data.getLocalPosition(e.mainStage_container),r={x:0};r.y=-e.temporary_rect.height/2-e.r_btn_h;var n,i={};i.x=a.x-e.temporary_rect.centerX,i.y=a.y-e.temporary_rect.centerY;var o=r.x*i.x+r.y*i.y,c=Math.sqrt(r.x*r.x+r.y*r.y)*Math.sqrt(i.y*i.y+i.x*i.x);n=o/c,e.tRotateOBj(Math.acos(n),a.x),e.$set(e,"after_rotate",!0)}e=null},tRotateOBj:function(t,e){var a=this;if(e-a.temporary_rect.centerX>=0){for(var r=0;r<a.ctrl_arr.length;r++)"association_gap_notT"==a.ctrl_arr[r].type?a.ctrl_arr[r].rotation=t:a.ctrl_arr[r].parent.rotation=t-a.ctrl_arr[r].parent.rotation_num;a.temporary_rect.rotation=t,a.outLine_container.getChildByName(a.temporary_rect.name).rotation=t}else{for(var n=0;n<a.ctrl_arr.length;n++)"association_gap_notT"==a.ctrl_arr[n].type?a.ctrl_arr[n].rotation=-t:a.ctrl_arr[n].parent.rotation=-t-a.ctrl_arr[n].parent.rotation_num;a.temporary_rect.rotation=-t,a.outLine_container.getChildByName(a.temporary_rect.name).rotation=-t}a=null},onTRotateEnd:function(){var t=this,e=t.temporary_rect,a=t.ctrl_arr;e.pivot.set(0);var r=[-e.width/2,-e.height/2,e.rotation];r=v.AFTER_ROTATE(r),e.x=parseFloat(r[0])+e.centerX,e.y=parseFloat(r[1])+e.centerY,t.can_rotate=0;for(var n=function(r){var n;if("association_gap_notT"!==a[r].type)a[r].rotation_num=a[r].rotation+a[r].parent.rotation,a[r].parent.pivot.set(0),n=[a[r].beforeRX-e.centerX,a[r].beforeRY-e.centerY,a[r].parent.rotation],n=v.AFTER_ROTATE(n),a[r].parent.x=parseFloat(n[0])+e.centerX,a[r].parent.y=parseFloat(n[1])+e.centerY,a[r].parent.rotation_num+=a[r].parent.rotation,a[r].parent.rotation=0,a[r].rotation=a[r].rotation_num;else if("association_gap_notT"==a[r].type){var i;a[r].pivot.set(0),i=[a[r].beforeRX-e.centerX,a[r].beforeRY-e.centerY,a[r].rotation-a[r].rotation_num],i=v.AFTER_ROTATE(i),a[r].x=parseFloat(i[0])+e.centerX,a[r].y=parseFloat(i[1])+e.centerY,a[r].rotation_num=a[r].rotation,setTimeout((function(){a[r].centerX=(a[r].vertexData[0]+a[r].vertexData[6])/2-(t.window_w-t.canvas_width)/2,a[r].centerY=(a[r].vertexData[1]+a[r].vertexData[7])/2-(t.window_h-t.canvas_height)/2}),50)}},i=0;i<a.length;i++)n(i);setTimeout((function(){t.renderTLine(!0)}),130),t.pushActiveLog()},onAssociationStart:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this;r.key_ctrlf.isDown&&!r.key_ctrlf.isUp?r.onDragStart(t):(r.clearTemporary(),r.addACtrlarr(t.target.association_name),t.target.lock&&(a=!0,e=!0),e||r.ctrlDeviation(t.data,!1),r.renderTLine(!1,!0,t.target.association_name,a))},onAScaleStart:function(t){var e=this;e.can_scale=1;for(var a=[],r=0;r<e.ctrl_arr.length;r++)e.ctrl_arr[r].oScale=e.ctrl_arr[r].scale.x,"association_gap_notT"==e.ctrl_arr[r].type?(t.target.pivotX=e.ctrl_arr[r].centerX,t.target.pivotY=e.ctrl_arr[r].centerY,t.target.association_rectX=e.ctrl_arr[r].x,t.target.association_rectY=e.ctrl_arr[r].y,t.target.owidth=e.ctrl_arr[r].width,t.target.oheight=e.ctrl_arr[r].height,a.push({index:r,x:e.ctrl_arr[r].position.x,y:e.ctrl_arr[r].position.y})):(e.ctrl_arr[r].type,a.push({index:r,x:e.ctrl_arr[r].parent.position.x,y:e.ctrl_arr[r].parent.position.y}));for(var n=0;n<e.ctrl_arr.length;n++)if("text"==e.ctrl_arr[n].type){var i=e.ctrl_arr[n].width/e.ctrl_arr[n].style.fontSize;e.ctrl_arr[n].text_num=i,e.ctrl_arr[n].ratio=t.target.owidth/e.ctrl_arr[n].width}t.target.ctrl_arr_pivot=a},onAScaleMove:function(t,e){var a=this;if(a.can_scale){var r=e.data.getLocalPosition(a.mainStage_container),n=v.LENGTH_SIZE({x:t.pivotX,y:t.pivotY},r);a.aScaleAll(n,t),a.$set(a,"after_scale",!0)}},aScaleAll:function(t,e){var a=this;if(!(t<=0)){var r,n;r=e.owidth/2,n=e.oheight/2;var i=Math.sqrt(r*r+n*n),o=t/i;o<=.1&&(o=.1);for(var c=0;c<a.ctrl_arr.length;c++)"association_gap_notT"==a.ctrl_arr[c].type?(a.ctrl_arr[c].scale.set(o*a.ctrl_arr[c].oScale),a.ctrl_arr[c].x=e.pivotX-(e.pivotX-e.association_rectX)*o,a.ctrl_arr[c].y=e.pivotY-(e.pivotY-e.association_rectY)*o,a.moveIcon(a.ctrl_arr[c]),a.ctrl_arr[c].width):"text"!==a.ctrl_arr[c].type&&(a.ctrl_arr[c].svg?a.ctrl_arr[c].scale.set(o):a.ctrl_arr[c].scale.set(o*a.ctrl_arr[c].oScale),a.ctrl_arr[c].parent.x=e.pivotX-(e.pivotX-e.ctrl_arr_pivot[c].x)*o,a.ctrl_arr[c].parent.y=e.pivotY-(e.pivotY-e.ctrl_arr_pivot[c].y)*o);for(var s=0;s<a.ctrl_arr.length;s++)if("text"==a.ctrl_arr[s].type){var l=a.ctrl_arr[s].ofonts*o;a.ctrl_arr[s].style.wordWrapWidth=(l+a.ctrl_arr[s].style.letterSpacing)*a.ctrl_arr[s].text_num,a.ctrl_arr[s].style.fontSize=l,a.$set(a.edit_bar.text,"fontSize",l),a.ctrl_arr[s].style.lineHeight=a.ctrl_arr[s].style.fontSize+a.ctrl_arr[s].lineHeightM,a.ctrl_arr[s].parent.x=e.pivotX-(e.pivotX-e.ctrl_arr_pivot[s].x)*o,a.ctrl_arr[s].parent.y=e.pivotY-(e.pivotY-e.ctrl_arr_pivot[s].y)*o}}},onAScaleEnd:function(){var t=this;t.can_scale=0;for(var e=function(e){"text"==t.ctrl_arr[e].type?t.scaleTextEnd(t.ctrl_arr[e]):t.ctrl_arr[e].svg&&t.updateSvgScale(t.ctrl_arr[e]),"association_gap_notT"==t.ctrl_arr[e].type&&(t.ctrl_arr[e].change=!0,t.changeAssociation(t.ctrl_arr[e]),setTimeout((function(){t.renderTLine(!1,!0,t.ctrl_arr[e].association_name)}),150))},a=0;a<t.ctrl_arr.length;a++)e(a);t.pushActiveLog()},onARotateStart:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var t=this,e=0;e<t.ctrl_arr.length;e++)t.ctrl_arr[e].dragging=!1,t.ctrl_arr[e].data=null,"association_gap_notT"==t.ctrl_arr[e].type&&(t.ctrl_arr[e].centerX=(t.ctrl_arr[e].vertexData[0]+t.ctrl_arr[e].vertexData[6])/2-(t.window_w-t.canvas_width)/2,t.ctrl_arr[e].centerY=(t.ctrl_arr[e].vertexData[1]+t.ctrl_arr[e].vertexData[7])/2-(t.window_h-t.canvas_height)/2,t.ctrl_arr[e].beforeRX=t.ctrl_arr[e].x,t.ctrl_arr[e].beforeRY=t.ctrl_arr[e].y,t.ctrl_arr[e].pivot.set(t.ctrl_arr[e].width/2/t.ctrl_arr[e].scale.x,t.ctrl_arr[e].height/2/t.ctrl_arr[e].scale.y),t.ctrl_arr[e].x=t.ctrl_arr[e].centerX,t.ctrl_arr[e].y=t.ctrl_arr[e].centerY,t.ass_r_data.associationH=t.ctrl_arr[e].height,t.ass_r_data.association_centerX=t.ctrl_arr[e].centerX,t.ass_r_data.association_centerY=t.ctrl_arr[e].centerY,t.ass_r_data.association_name=t.ctrl_arr[e].association_name);for(var a=0;a<t.ctrl_arr.length;a++)"association_gap_notT"!==t.ctrl_arr[a].type&&(t.ctrl_arr[a].beforeRX=t.ctrl_arr[a].parent.x,t.ctrl_arr[a].beforeRY=t.ctrl_arr[a].parent.y,t.ctrl_arr[a].parent.pivot.set((t.ass_r_data.association_centerX-t.ctrl_arr[a].parent.position.x)/1,(t.ass_r_data.association_centerY-t.ctrl_arr[a].parent.position.y)/1),t.ctrl_arr[a].parent.x=t.ass_r_data.association_centerX,t.ctrl_arr[a].parent.y=t.ass_r_data.association_centerY);t.can_rotate=1},onARotateMove:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this;if(e.can_rotate){var a=t.data.getLocalPosition(e.mainStage_container),r={x:0};r.y=-e.ass_r_data.associationH/2-e.r_btn_h;var n,i={};i.x=a.x-e.ass_r_data.association_centerX,i.y=a.y-e.ass_r_data.association_centerY;var o=r.x*i.x+r.y*i.y,c=Math.sqrt(r.x*r.x+r.y*r.y)*Math.sqrt(i.y*i.y+i.x*i.x);n=o/c,e.aRotateOBj(Math.acos(n),a.x,e.ass_r_data.association_centerX),e.$set(e,"after_rotate",!0)}},aRotateOBj:function(t,e,a){var r=this;if(e-a>=0)for(var n=0;n<r.ctrl_arr.length;n++)"association_gap_notT"==r.ctrl_arr[n].type?(r.ctrl_arr[n].rotation=t,r.outLine_container.getChildByName(r.ctrl_arr[n].name).rotation=t):r.ctrl_arr[n].parent.rotation=t;else for(var i=0;i<r.ctrl_arr.length;i++)"association_gap_notT"==r.ctrl_arr[i].type?(r.ctrl_arr[i].rotation=-t,r.outLine_container.getChildByName(r.ctrl_arr[i].name).rotation=-t):r.ctrl_arr[i].parent.rotation=-t},onARotateEnd:function(){var t=this;t.can_rotate=0;for(var e=0;e<t.ctrl_arr.length;e++)if("association_gap_notT"!==t.ctrl_arr[e].type){t.ctrl_arr[e].rotation_num=t.ctrl_arr[e].rotation+t.ctrl_arr[e].parent.rotation,t.ctrl_arr[e].parent.pivot.set(0);var a=void 0;a=[t.ctrl_arr[e].beforeRX-t.ass_r_data.association_centerX,t.ctrl_arr[e].beforeRY-t.ass_r_data.association_centerY,t.ctrl_arr[e].parent.rotation],a=v.AFTER_ROTATE(a),t.ctrl_arr[e].parent.x=parseFloat(a[0])+t.ass_r_data.association_centerX,t.ctrl_arr[e].parent.y=parseFloat(a[1])+t.ass_r_data.association_centerY,t.ctrl_arr[e].parent.rotation=0,t.ctrl_arr[e].rotation=t.ctrl_arr[e].rotation_num}else if("association_gap_notT"==t.ctrl_arr[e].type){t.ctrl_arr[e].pivot.set(0);var r=void 0;r=[-t.ctrl_arr[e].width/2,-t.ctrl_arr[e].height/2,t.ctrl_arr[e].rotation],r=v.AFTER_ROTATE(r),t.ctrl_arr[e].x=parseFloat(r[0])+t.ass_r_data.association_centerX,t.ctrl_arr[e].y=parseFloat(r[1])+t.ass_r_data.association_centerY,t.ctrl_arr[e].rotation_num=t.ctrl_arr[e].rotation}t.forChangeAssociation(),setTimeout((function(){t.renderTLine(!1,!0,t.ass_r_data.association_name)}),100),t.pushActiveLog()},forChangeAssociation:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=this,a=0;a<e.ctrl_arr.length;a++)if("association_gap_notT"==e.ctrl_arr[a].type&&(void 0==t||t==e.ctrl_arr[a].association_name)){e.ctrl_arr[a].change=!0,e.changeAssociation(e.ctrl_arr[a]);break}},updateSvgScale:function(t){var e=this,a=t.texture.baseTexture.resource.svg,r=new e.mypixi.resources.SVGResource(a,{scale:t.scale.x*t.texture.baseTexture.resource.scale,autoLoad:!0});r.load().then((function(){t.texture.baseTexture.destroy(),t.texture.baseTexture.setResource(r),t.texture.baseTexture.update(),t.scale.set(1)})),e=null},scaleTextEnd:function(t){t.ofonts=t.style.fontSize,t.originalw=t.width,t.originalh=t.height},ctrlDeviation:function(t,e){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this;r.in_move=null;for(var n=0;n<r.ctrl_arr.length;n++){r.ctrl_arr[n].data=t,r.ctrl_arr[n].dragging=a;var i=r.ctrl_arr[n].data.getLocalPosition(r.mainStage_container);"association_gap_notT"==r.ctrl_arr[n].type?(r.ctrl_arr[n].deviationX=i.x-r.ctrl_arr[n].x,r.ctrl_arr[n].deviationY=i.y-r.ctrl_arr[n].y,r.showEdit("association")):(r.ctrl_arr[n].deviationX=i.x-r.ctrl_arr[n].parent.x,r.ctrl_arr[n].deviationY=i.y-r.ctrl_arr[n].parent.y)}if(e){r.temporary_rect.data=t,r.temporary_rect.dragging=a;var o=r.temporary_rect.data.getLocalPosition(r.mainStage_container);r.temporary_rect.deviationX=o.x-r.temporary_rect.x,r.temporary_rect.deviationY=o.y-r.temporary_rect.y,r.showEdit("temporary")}r=null},moveIcon:function(t){var e=this;e.outLine_container.getChildByName(t.name).getChildByName("scale-btn").position.set(t.width/2,-t.height/2),e.outLine_container.getChildByName(t.name).getChildByName("rotate-btn").position.set(0,-t.height/2-e.r_btn_h),"text"==t.type&&e.outLine_container.getChildByName(e.in_move.name).getChildByName("stretch-btn").position.set(e.in_move.width/2,0),e=null},aSingleClick:function(t,e){var a=this;if(a.in_move=t,!a.in_move.lock){t.data=e,t.dragging=!0;var r=t.data.getLocalPosition(a.mainStage_container);t.deviationX=r.x-t.parent.x,t.deviationY=r.y-t.parent.y,a.ctrl_arr&&(a.ctrl_arr.length=0),a.addACtrlarr(a.in_move.association_name);for(var n=0;n<a.ctrl_arr.length;n++)if("association_gap_notT"==a.ctrl_arr[n].type&&a.ctrl_arr[n].association_name==t.association_name){a.ctrl_arr[n].data=e,a.aSingleClickBorder(a.ctrl_arr[n].association_name);break}"image"==a.in_move.type?a.showEdit("image_in"):"text"==a.in_move.type&&a.showEdit("text_in")}a=null},aSingleClickBorder:function(t){var e=this;e.$nextTick((function(){e.removeLine();for(var a=0;a<e.ctrl_arr.length;a++)"association_gap_notT"==e.ctrl_arr[a].type&&e.ctrl_arr[a].association_name==t?(e.ctrl_arr[a].change=!0,e.changeAssociation(e.ctrl_arr[a]),e.createBorder(e.ctrl_arr[a],!0,!0,!1)):e.ctrl_arr[a].name==e.in_move.name&&e.createBorder(e.ctrl_arr[a],!1,!1);e=null}))}}},u=(a("df34"),a("faf7"),a("bf55"),a("391c")),g=a.n(u),f={methods:{renderTemplate:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this,a=e.render_data;e.$set(e,"container_arr",[]),e.$set(e,"in_move",null),e.$set(e,"ctrl_arr",[]),e.$set(e,"temporary_rect",null);for(var r=[],n={},i=0;i<a.length;i++)for(var o=0;o<a[i].children[0].ass_children.length;o++){if("image"==a[i].children[0].ass_children[o].type||"svg"==a[i].children[0].ass_children[o].type){var c=a[i].children[0].ass_children[o].src;"logo"==a[i].children[0].ass_children[o].role&&t&&e.$set(e.tempRoleMsg,"logo",e.tempRoleMsg["logo"]+=1),"main"==a[i].children[0].ass_children[o].role&&t&&e.$set(e.tempRoleMsg,"main",e.tempRoleMsg["main"]+=1),"arc_titleImg"==a[i].children[0].ass_children[o].role&&e.$set(e.arc_obj,"arc_titleImg",a[i].children[0].ass_children[o]),"arc_subtitleImg"==a[i].children[0].ass_children[o].role&&e.$set(e.arc_obj,"arc_subtitleImg",a[i].children[0].ass_children[o]),e.p_app.loader.resources[c]||r.push(c)}if("text"==a[i].children[0].ass_children[o].type&&!e.defaultTextFamily.includes(a[i].children[0].ass_children[o].style.fontFamily)){var s=a[i].children[0].ass_children[o];n["".concat(s.style.fontFamily)]=(n["".concat(s.style.fontFamily)]?n["".concat(s.style.fontFamily)]:"")+s.text}}0!==Object.keys(n).length&&t?e.getfontFamilyBack(n).then((function(){setTimeout((function(){r=Array.from(new Set(r)),e.p_app.loader.add(r,{crossOrigin:"Anonymous"}).load((function(){e.afterLoad(a,t)}))}),300)})):(r=Array.from(new Set(r)),e.p_app.loader.add(r,{crossOrigin:"Anonymous"}).load((function(){e.afterLoad(a,t)})))},fontPost:function(t){var e=this,a={user_id:e.user_data.id,font_name:t.font_name,text:t.text};return p()({method:"post",url:e.api.cutFont,data:a})},getAllfontFamily:function(t){var e=this,a=[];for(var r in t)e.defaultTextFamily.includes(r)||a.push(e.fontPost({font_name:"".concat(r),text:t[r]}));return p.a.all(a)},afterLoad:function(t,e){for(var a=this,r=0;r<t.length;r++)for(var n=0;n<t[r].children[0].ass_children.length;n++){var i=t[r].children[0].ass_children[n];i.association_id=t[r].children[0].association_id,"image"==t[r].children[0].ass_children[n].type||"svg"==t[r].children[0].ass_children[n].type?a.newContainer(i,!0):"text"==t[r].children[0].ass_children[n].type&&("title"==i.role&&a.$set(a.tempRoleMsg,"title",a.tempRoleMsg["title"]+=1),"subtitle"==i.role&&a.$set(a.tempRoleMsg,"subtitle",a.tempRoleMsg["subtitle"]+=1),"arc_title"!=i.role&&"arc_subtitle"!=i.role||a.$set(a.arc_obj,i.role,i),("client"!=a.user_type||"arc_title"!=i.role&&"arc_subtitle"!=i.role)&&a.newContainerText(i,!0))}if(a.arc_obj.arc_title&&a.arc_obj.arc_titleImg&&"client"==a.user_type){var o=a.arc_obj.arc_title.text.split(""),c="number"===typeof a.arc_obj.arc_title.textReplace?a.arc_obj.arc_title.textReplace:null;a.renderARC("arc_title",o,c)}if(a.arc_obj.arc_subtitle&&a.arc_obj.arc_subtitleImg&&"client"==a.user_type){var s=a.arc_obj.arc_subtitle.text.split(""),l="number"===typeof a.arc_obj.arc_subtitle.textReplace?a.arc_obj.arc_subtitle.textReplace:null;a.renderARC("arc_subtitle",s,l)}a.renderStage();for(var _={},d=0;d<a.container_arr.length;d++)if(""!==a.container_arr[d].cont.children[0].association_name){var h=a.container_arr[d].cont.children[0].association_name;_[h]||(_[h]=[]),_[h].push(a.container_arr[d].cont.children[0])}var p=Object.keys(_);if(p.length>0){for(var v=0;v<p.length;v++){var m=p[v];a.ctrl_arr=_[m],a.createAssociation(m,_[m][0].m_comp_name,!0)}a.renderStage()}e&&(a.pushActiveLog(!0),a.fullscreenLoading=!1),a.ctrl_arr&&(a.ctrl_arr.length=0),a.updateLayer()},renderStage:function(){var t=this;t.p_app.stage.children[1].removeChildren();for(var e=0;e<t.container_arr.length;e++)t.mainStage_container.addChild(t.container_arr[e].cont);t.outLine(),t.p_app.stage.interactive=!0,t.p_app.stage.hitArea=null,t.p_app.stage.hitArea=new t.mypixi.Rectangle(0,0,t.window_w,t.window_h)},addCancleRect:function(){var t=this,e=new t.mypixi.Graphics;e.interactive=!0,e.width=t.window_w,e.height=t.window_h,e.beginFill(16724736),e.alpha=0,e.drawRect(0,0,t.window_w,t.window_h),e.endFill(),e.name="cancel_block",e.rotation_num=0,e.x=-(t.window_w-t.canvas_width)/2,e.y=-(t.window_h-t.canvas_height)/2,e.on("click",t.cancelInMove);var a=new t.mypixi.Container;a.width=t.canvas_width,a.height=t.canvas_height,a.position.set((t.window_w-t.canvas_width)/2,(t.window_h-t.canvas_height)/2),a.accessible=!0,a.addChild(e),t.p_app.stage.addChild(a)},outLine:function(){var t=this;t.outLine_container=null,t.outLine_container=new t.mypixi.Container,t.outLine_container.type="outLine",t.outLine_container.name="outLine",t.mainStage_container.addChild(t.outLine_container)},maskInit:function(){var t=this,e=new t.mypixi.Graphics;e.beginFill(14408667,.5),e.drawRect(0,0,t.window_w,(t.window_h-t.canvas_height)/2),e.endFill(),e.x=0,e.y=0,e.interactive=!1,t.p_app.stage.addChild(e);var a=new t.mypixi.Graphics;a.beginFill(14408667,.5),a.drawRect(0,0,t.window_w,(t.window_h-t.canvas_height)/2),a.endFill(),a.x=0,a.y=t.canvas_height+(t.window_h-t.canvas_height)/2,a.interactive=!1,t.p_app.stage.addChild(a);var r=new t.mypixi.Graphics;r.beginFill(14408667,.5),r.drawRect(0,0,(t.window_w-t.canvas_width)/2,t.canvas_height),r.endFill(),r.x=0,r.y=(t.window_h-t.canvas_height)/2,r.interactive=!1,t.p_app.stage.addChild(r);var n=new t.mypixi.Graphics;n.beginFill(14408667,.5),n.drawRect(0,0,(t.window_w-t.canvas_width)/2,t.canvas_height),n.endFill(),n.x=t.canvas_width+(t.window_w-t.canvas_width)/2,n.y=(t.window_h-t.canvas_height)/2,n.interactive=!1,t.p_app.stage.addChild(n),n=null,r=null,a=null,e=null},ruler:function(){var t=this,e=new t.mypixi.Container;e.width=t.canvas_width,e.height=t.canvas_height,e.position.set(t.window_w/2,t.window_h/2);var a=new t.mypixi.Graphics;a.lineStyle(1,8551805,1);for(var r=1;r<=t.canvas_width;r++)if(r%100==0){a.moveTo(r,0),a.lineTo(r,-20);var n=new t.mypixi.Text(r);n.style.fontSize="20px",n.style.fill=8551805,n.x=r-t.canvas_width/2,n.y=-35-t.canvas_height/2,e.addChild(n)}else r%50==0?(a.moveTo(r,0),a.lineTo(r,-10)):r%10==0&&(a.moveTo(r,0),a.lineTo(r,-5));a.x=-t.canvas_width/2,a.y=-t.canvas_height/2;var i=new t.mypixi.Graphics;i.lineStyle(1,8551805,1);for(var o=1;o<=t.canvas_height;o++)if(o%100==0){a.moveTo(0,o),a.lineTo(-20,o);var c=new t.mypixi.Text(o);c.style.fontSize="20px",c.style.fill=8551805,c.x=-45-t.canvas_width/2,c.y=o-t.canvas_height/2,e.addChild(c)}else o%50==0?(a.moveTo(0,o),a.lineTo(-10,o)):o%10==0&&(a.moveTo(0,o),a.lineTo(-5,o));i.x=-t.canvas_width/2,i.y=-t.canvas_height/2,e.addChild(a),e.addChild(i),t.ruler_container=e,t.p_app.stage.addChild(e)},newContainer:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=this;r.img_loading?alert("已有元素再加载中"):(t.type="image",t.id="".concat(t.id),r.addContainer(t,t.position),r.loadSprite(t,e,a))},loadSprite:function(t,e,a){var r,n=this,i=g.a.cloneDeep(t),o=i.src;n.img_loading=!0,n.p_app.loader.resources[o]?/.svg$/.test(o)?n.loadSvgImg(o,r,i,e,a):(r=new n.mypixi.Sprite(n.p_app.loader.resources[o].texture),n.addImg(r,i,e),n.img_loading=!1,a()):n.p_app.loader.add(o,{crossOrigin:"anonymous"}).load((function(){/.svg$/.test(o)?n.loadSvgImg(o,r,i,e,a):(r=new n.mypixi.Sprite(n.p_app.loader.resources[o].texture),n.addImg(r,i,e),n.img_loading=!1,a())}))},loadSvgImg:function(t,e,a,r,n){var i=this,o=new i.mypixi.resources.SVGResource(t,{scale:1,autoLoad:!0});o.load().then((function(){var t=new i.mypixi.BaseTexture(o),c=new i.mypixi.Texture(t);e=new i.mypixi.Sprite(c),e.svg=!0,i.addImg(e,a,r),i.img_loading=!1,n()}))},addImg:function(t,e,a){var r=this;if(t.interactive=!0,t.anchor.set(.5),t.cursor="grab",t.name="".concat(e.id),t.file_id=e.file_id,t.type="image",t.srcData=e.src,t.rotation_num=0,t.originalw=t.width,t.originalh=t.height,t.position.set(0,0),t.association_name="",t.m_comp_name=e.m_comp_name,t.lock=!1,t.role="normal",e.skew&&t.skew.set(e.skew.x,e.skew.y),"number"===typeof e.hueNumber){t.hueNumber=e.hueNumber,e.hueNumber*=360;var n=new r.mypixi.filters.ColorMatrixFilter;n.hue(e.hueNumber,!0),t.filters=[n]}a&&(t.rotation=e.rotation,t.rotation_num=e.rotation,t.alpha=e.alpha,t.scale.set(e.scale),t.association_name=e.association_id,t.role=e.role),t.on("rightdown",r.onRightC).on("mousedown",r.onDragStart).on("mousemove",r.onDragMove).on("mouseupoutside",r.onDragEnd).on("mouseup",r.onDragEnd),r.container_arr[r.findCont(e.id)].cont.addChild(t),a||(r.mainStage_container.addChild(r.container_arr[r.findCont(e.id)].cont),r.in_move=t,r.containerLine(r.in_move,!1,!0),r.showEdit(r.in_move.type))},addText:function(t,e,a){var r=this,n=null,i={fontFamily:"default",fontSize:50,lineHeight:50,leading:0,fontStyle:"normal",fontWeight:"normal",fill:"#000",stroke:"#000",strokeThickness:0,dropShadow:!1,dropShadowColor:"#000000",dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowDistance:18,wordWrap:!0,wordWrapWidth:400,breakWords:!0,padding:0,textBaseline:"Middle",trim:!1,whiteSpace:"pre"};if(n=e?new r.mypixi.Text("".concat(t.text),t.style):new r.mypixi.Text("".concat(t.text),i),n.interactive=!0,n.anchor.set(.5),n.cursor="grab",n.name=t.id,n.type="text",n.rotation_num=0,n.originalw=n.width,n.originalh=n.height,n.ofonts=n.style.fontSize,n.position.set(0,0),n.lineHeightM=n.lineHeight-n.fontSize,n.association_name="",n.m_comp_name=t.m_comp_name,n.lock=!1,n.role="normal",t.skew&&n.skew.set(t.skew.x,t.skew.y),"number"===typeof t.textReplace&&(n.textReplace=t.textReplace,n.textPosition=r.textPositionArr[t.textReplace]),t.textReverse&&(n.textReverse=!0),"number"===typeof t.hueNumber){n.hueNumber=t.hueNumber,t.hueNumber*=360;var o=new r.mypixi.filters.ColorMatrixFilter;o.hue(t.hueNumber,!0),n.filters=[o]}e&&(n.rotation=t.rotation,n.rotation_num=t.rotation,n.alpha=t.alpha,n.association_name=t.association_id,n.ofonts=t.style.fontSize,n.originalw=n.width,n.originalh=n.height,n.role=t.role),r.container_arr[r.findCont(t.id)].cont.addChild(n),a?(t.text_num?n.text_num=t.text_num:n.text_num=n.width/n.style.fontSize,n.on("rightdown",r.onRightC).on("mousedown",r.onDragStart).on("mousemove",r.onDragMove).on("mouseupoutside",r.onDragEnd).on("mouseup",r.onDragEnd),e||(r.mainStage_container.addChild(r.container_arr[r.findCont(t.id)].cont),r.in_move=n,r.containerLine(n,!1,!0),r.showEdit(r.in_move.type))):n.type="notSave","arc_title"==n.role?setTimeout((function(){r.arc_obj.title_obj=n}),0):"arc_subtitle"==n.role&&setTimeout((function(){r.arc_obj.subtitle_obj=n}),0),t=null,i=null,n.off(),n=null},addContainer:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:this.canvas_width/2,y:this.canvas_height/2},a=this,r=new a.mypixi.Container;r.width=a.canvas_width,r.height=a.canvas_height,r.position.set(e.x,e.y),r.type="".concat(t.type,"_c"),r.rotation_num=0,a.containerArrAdd(t.m_comp_name,r,t.id),r=null},newContainerText:function(t,e){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this;t.type="text",t.id="".concat(t.id),r.addContainer(t,t.position),r.addText(t,e,a),t=null},containerArrAdd:function(t,e,a){var r=this,n=r.findFinalIndex(t),o=[],c=[{cont:e,index:0,name:a,m_comp_name:t}],s=[];if(n==r.container_arr.length-1||0==n&&0==r.container_arr.length)r.container_arr=[].concat(Object(i["a"])(r.container_arr),c);else{for(var l=0;l<r.container_arr.length;l++)l<=n?o.push(r.container_arr[l]):l>n&&s.push(r.container_arr[l]);r.container_arr=[].concat(o,c,s)}r.sortContainerArr(!0)},sortContainerArr:function(t){var e=this;e.container_arr.map((function(e,a,r){e.index=a,!t||"image_c"!=e.cont.type&&"text_c"!=e.cont.type||(e.cont.rotation_num=0)}))},containerLine:function(t,e,a){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=this;a&&(i.removeLine(),i.outLine()),i.createBorder(t,e,r,!n)},createBorder:function(t,e,a){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=this,i=new n.mypixi.Container;i.width=n.canvas_width,i.height=n.canvas_height,"association_gap"==t.type||"association_gap_notT"==t.type?i.position.set(t.centerX,t.centerY):i.position.set(t.parent.position.x,t.parent.position.y),i.pivot.set(0,0),i.type="outLine_child",i.name=t.name,e&&r?"association_gap"!=t.type&&"association_gap_notT"!=t.type||("association_gap_notT"==t.type&&a?(n.addScaleIcon(i,t,!1,!0),n.addRotateIcon(i,t,!1,!0)):"association_gap"==t.type&&(n.addScaleIcon(i,t,e),n.addRotateIcon(i,t,e))):r&&("text"!=t.type||t.structure?"image"==t.type&&(n.addScaleIcon(i,t),n.addRotateIcon(i,t)):(n.addScaleIcon(i,t),n.addStretchIcon(i,t),n.addRotateIcon(i,t))),i.addChild(n.createBorderLine({width:t.width,height:t.height},r?8900351:"#D62B25")),i.rotation=t.rotation,n.outLine_container.addChild(i),i=null,t=null,n=null},createBorderLine:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8900351,a=this,r=new a.mypixi.Graphics;return r.lineStyle(2,e,1),r.moveTo(0,0),r.type="line",r.name="line",r.lineTo(t.width,0),r.moveTo(t.width,0),r.lineTo(t.width,t.height),r.moveTo(t.width,t.height),r.lineTo(0,t.height),r.lineTo(0,t.height),r.lineTo(0,0),r.moveTo(0,0),r.position.set(-t.width/2,-t.height/2),r},addScaleIcon:function(t,e,a){var r,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this;r=new i.mypixi.Sprite(i.p_app.loader.resources[i.scale].texture),r.interactive=!0,r.scale.set(2),r.anchor.set(.5),r.name="scale-btn",r.cursor="move",r.type="btn",r.position.set(Math.floor(e.width/2),Math.floor(-e.height/2)),a?r.on("pointerdown",i.onTScaleStart).on("pointerup",i.onTScaleEnd).on("mousemove",(function(t){i.onTScaleMove(r,t)})).on("pointerupoutside",i.onTScaleEnd):n?r.on("pointerdown",i.onAScaleStart).on("pointerup",i.onAScaleEnd).on("mousemove",(function(t){i.onAScaleMove(r,t)})).on("pointerupoutside",i.onAScaleEnd):r.on("pointerdown",i.onScaleStart).on("pointerup",i.onScaleEnd).on("mousemove",(function(t){i.onScaleMove(r,t)})).on("pointerupoutside",i.onScaleEnd),t.addChild(r),r.off(),a||n||(r=null),t=null},addRotateIcon:function(t,e,a){var r,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this;r=new i.mypixi.Sprite(i.p_app.loader.resources[i.rotate].texture),r.interactive=!0,r.scale.set(2),r.anchor.set(.5),r.name="rotate-btn",r.cursor="pointer",r.type="btn",r.position.set(0,Math.floor(-e.height/2-i.r_btn_h)),a?r.on("pointerdown",i.onTRotateStart).on("pointerup",i.onTRotateEnd).on("mousemove",i.onTRotateMove).on("pointerupoutside",i.onTRotateEnd):n?r.on("pointerdown",i.onARotateStart).on("pointerup",(function(t){i.onARotateEnd()})).on("mousemove",(function(t){i.onARotateMove(t)})).on("pointerupoutside",(function(t){i.onARotateEnd()})):r.on("pointerdown",i.onRotateStart).on("mousemove",i.onRotateMove).on("pointerup",i.onRotateEnd).on("pointerupoutside",i.onRotateEnd),t.addChild(r),r.off(),r=null,t=null},addStretchIcon:function(t,e){var a,r=this;a=new r.mypixi.Sprite(r.p_app.loader.resources[r.stretch].texture),a.interactive=!0,a.scale.set(2),a.anchor.set(.5),a.name="stretch-btn",a.cursor="ew-resize",a.type="btn",a.position.set(Math.floor(e.width/2),0),a.on("pointerdown",r.onStretchStart).on("pointerup",r.onStretchEnd).on("mousemove",r.onStretchMove).on("pointerupoutside",r.onStretchEnd),t.addChild(a),a.off(),a=null,t=null},findMinAndAdd:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=this,n=[];if(r.ctrl_arr.length>=2&&0==e||e>1){r.in_move=null,r.clearTemAss(!0);for(var i=0;i<r.ctrl_arr.length;i++)n.push(r.findCont(r.ctrl_arr[i].name));n.sort((function(t,e){return t-e}));var o=new r.mypixi.Container;o.width=r.canvas_width,o.height=r.canvas_height,o.pivot.set(0,0),o.name="temporary_c",r.container_arr.splice(n[0],0,{cont:o,index:n[0],name:"temporary_c"}),r.sortContainerArr(!0),r.findRect(o,t,!0)}else 1==r.ctrl_arr.length&&0==e?(r.normalStart(r.ctrl_arr[0],t),r.in_move.dragging=!1):1==e&&(r.clearTemAss(!0),r.renderTLine(!1,!0,a))},findRect:function(t,e,a){for(var r=this,n=[],i=[],o=0;o<r.ctrl_arr.length;o++)for(var c=r.ctrl_arr[o].vertexData,s=0;s<c.length;s++)s%2==0||0==s?n.push(c[s]):i.push(c[s]);n.sort((function(t,e){return t-e})),i.sort((function(t,e){return t-e}));var l=n[n.length-1]-n[0],_=i[i.length-1]-i[0];t.position.set(0,0);var d=new r.mypixi.Graphics;d.interactive=!0,d.width=l,d.height=_,d.originalw=l,d.originalh=_,d.beginFill(16724736,.1),d.alpha=.01,d.drawRect(0,0,l,_),d.endFill(),d.name="temporary",d.type="association_gap",d.rotation_num=0,d.x=n[0]-(r.window_w-r.canvas_width)/2,d.y=i[0]-(r.window_h-r.canvas_height)/2,d.cursor="grab",d.centerX=d.x+d.width/2,d.centerY=d.y+d.height/2,r.temporary_rect=d,d.on("rightdown",r.onRightC).on("mousedown",r.onTemporaryStart).on("mousemove",r.onDragMove).on("mouseupoutside",r.onTemporaryEnd).on("mouseup",r.onTemporaryEnd),t.addChild(d),r.renderStage(),r.renderTLine(!0),r.ctrlDeviation(e,!0,a)},removeLine:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this;if(null!==t){var a=e.outLine_container.getChildByName(t);a.removeChildren(),e.outLine_container.removeChild(a),a=null}else e.outLine_container&&(e.outLine_container.removeChildren(),e.mainStage_container.removeChild(e.outLine_container),e.outLine_container=null);e=null},cancelInMove:function(){var t=this;t.removeLine(),t.in_move?t.in_move=null:t.temporary_rect&&t.clearTemporary(),t.ctrl_arr&&(t.ctrl_arr.length=0),t.click_ass_id="",t.$set(t.edit_bar.btn,"show",!1),t.hide_edit_f(),t.updateLayer()},clearTemporary:function(){var t=this,e=t.findCont("temporary_c");if(-1!==e&&(t.mainStage_container.removeChildAt(e),t.container_arr.splice(e,1)),t.ctrl_arr.length>=1)for(var a=0;a<t.ctrl_arr.length;a++)t.ctrl_arr[a].dragging=!1,t.ctrl_arr[a].data=null;t.ctrl_arr.length=0,t.temporary_rect=null,t.sortContainerArr(!0)},clearTemAss:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this;if(null!==a.temporary_rect){var r=a.findCont("temporary_c");-1!==r&&(a.mainStage_container.removeChildAt(r),a.container_arr.splice(r,1)),a.temporary_rect=null}if(e)for(var n=0;n<a.ctrl_arr.length;n++)if("association_gap_notT"==a.ctrl_arr[n].type){var i=a.findCont(a.ctrl_arr[n].name);-1!==i&&(a.mainStage_container.removeChildAt(i),a.container_arr.splice(i,1))}a.sortContainerArr(t)},createAssociation:function(t,e,a){var r=this;a||r.clearTemAss(!0,!0);for(var n=[],i=0;i<r.ctrl_arr.length;i++)n.push(r.findCont(r.ctrl_arr[i].name));n.sort((function(t,e){return t-e}));for(var o=[],c=[],s=[],l=0;l<r.container_arr.length;l++)l<n[n.length-1]?r.container_arr[l].cont.children[0].association_name!==t&&o.push(r.container_arr[l]):l>n[n.length-1]&&r.container_arr[l].cont.children[0].association_name!==t&&s.push(r.container_arr[l]),r.container_arr[l].cont.children[0].association_name==t&&c.push(r.container_arr[l]);r.container_arr=[].concat(o,c,s),r.sortContainerArr(!0);for(var _=-1,d=0;d<r.container_arr.length;d++)if(r.container_arr[d].cont.children[0].association_name==t){_=d;break}var h=new r.mypixi.Container;h.width=r.canvas_width,h.height=r.canvas_height,h.pivot.set(0,0),h.rotation_num=0,h.name=t,r.container_arr.splice(_,0,{cont:h,index:n[0],name:t,m_comp_name:e}),r.sortContainerArr(!0),r.createAssociationRect(h,t,a)},createAssociationRect:function(t,e,a){for(var r=this,n=[],i=[],o=0;o<r.ctrl_arr.length;o++)for(var c=r.ctrl_arr[o].vertexData,s=0;s<c.length;s++)s%2==0||0==s?n.push(c[s]):i.push(c[s]);n.sort((function(t,e){return t-e})),i.sort((function(t,e){return t-e}));var l=n[n.length-1]-n[0],_=i[i.length-1]-i[0];t.position.set(0,0);var d=new r.mypixi.Graphics;d.interactive=!0,d.width=l,d.height=_,d.originalw=l,d.originalh=_,d.beginFill(15132410,.1),d.alpha=.01,d.drawRect(0,0,l,_),d.endFill(),d.name=e,d.association_name=e,d.lock=!1,d.type="association_gap_notT",d.rotation_num=0,d.x=n[0]-(r.window_w-r.canvas_width)/2,d.y=i[0]-(r.window_h-r.canvas_height)/2,d.cursor="grab",d.centerX=d.x+d.width/2,d.centerY=d.y+d.height/2,r.ctrl_arr.push(d),d.on("rightdown",r.onRightC).on("mousedown",r.onAssociationStart).on("mousemove",r.onDragMove).on("mouseupoutside",r.onTemporaryEnd).on("mouseup",r.onTemporaryEnd),t.addChild(d),a||(r.renderStage(),r.renderTLine(!1,!0,e),r.showEdit("association"))},renderTLine:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=this;n.removeLine();for(var i=0;i<n.ctrl_arr.length;i++)e&&n.ctrl_arr[i].association_name==a?r?n.containerLine(n.ctrl_arr[i],!0,0===i,e,!0):n.containerLine(n.ctrl_arr[i],!0,0===i,e,!1):n.containerLine(n.ctrl_arr[i],!0,0===i);t&&n.containerLine(n.temporary_rect,!0,!1),n=null},upDownMove:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=this,n=[],i=[],o=[],c=[],s=null;s=e?t+1:t-1;var l=null,_=null;if(""!==r.container_arr[t].cont.children[0].association_name){for(var d=r.container_arr[t].cont.children[0].association_name,h=0;h<r.container_arr.length;h++)d==r.container_arr[h].cont.children[0].association_name&&(i.push(r.container_arr[h]),l=h);if(e){s=l+1;for(var p=0;p<i[0].index;p++)n.push(r.container_arr[p])}else s=i[0].index-1}else{i.push(r.container_arr[t]);for(var v=0;v<i[0].index;v++)n.push(r.container_arr[v]);l=t}if(!r.container_arr[s])return!1;if(r.container_arr[t].m_comp_name!==r.container_arr[s].m_comp_name)return!1;if(r.container_arr[s])if(""!==r.container_arr[s].cont.children[0].association_name)for(var m=r.container_arr[s].cont.children[0].association_name,u=0;u<r.container_arr.length;u++)m==r.container_arr[u].cont.children[0].association_name&&(o.push(r.container_arr[u]),_=u);else o.push(r.container_arr[s]),_=s;if(e){for(var g=_+1;g<r.container_arr.length;g++)c.push(r.container_arr[g]);r.container_arr=""!==a&&"maxUp"==a?[].concat(n,o,c,i):[].concat(n,o,i,c)}else{for(var f=l+1;f<r.container_arr.length;f++)c.push(r.container_arr[f]);var y=o[0].index;n.length=0;for(var w=0;w<y;w++)n.push(r.container_arr[w]);r.container_arr=""!==a&&"maxDown"==a?[].concat(i,n,o,c):[].concat(n,i,o,c)}r.sortContainerArr(!0),r.renderUpDown(),r.updateLayer(),r.$set(r.right_block,"show",!1),r.pushActiveLog(!0)},renderUpDown:function(){var t=this,e=t.mainStage_container.children[t.mainStage_container.children.length-1];t.mainStage_container.removeChildren();for(var a=0;a<t.container_arr.length;a++)t.mainStage_container.addChild(t.container_arr[a].cont),t.container_arr[a].cont.buttonMode=!1;t.mainStage_container.addChild(e)},deleteSomeone:function(t,e,a){var r=this,n=r.findCont(t);-1!==n&&(r.mainStage_container.removeChildAt(n),r.container_arr.splice(n,1),r.in_move=null,r.sortContainerArr(!0),a())},onRightDelete:function(){var t=this;if(0==t.ctrl_arr.length&&t.in_move)t.deleteSomeone(t.in_move.name,!0,(function(){t.$set(t.right_block,"show",!1)}));else{t.clearTemAss(!1);for(var e=0;e<t.ctrl_arr.length;e++)t.deleteSomeone(t.ctrl_arr[e].name,!1,(function(){}));t.$set(t.right_block,"show",!1)}t.updateLayer(),t.pushActiveLog(!0),t.cancelInMove()},moveActiveLog:function(t){var e=this;setTimeout((function(){if("prev"==t&&e.active_index>0){if(e.$set(e,"render_data",e.active_log[e.active_index-1]),e.$set(e,"active_index",e.active_index-1),e.renderTemplate(),0==e.active_index){var a=g.a.cloneDeep(e.active_log[0]);e.active_log.length=0,e.active_log.push(a)}}else"next"==t&&e.active_log.length-1!==e.active_index&&(e.$set(e,"render_data",e.active_log[e.active_index+1]),e.$set(e,"active_index",e.active_index+1),e.renderTemplate())}),50)},renderARC:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this,n=null,i=null;"arc_title"==t?(n=g.a.cloneDeep(r.arc_obj.arc_title),i={position:g.a.cloneDeep(r.arc_obj.arc_titleImg.position.x?r.arc_obj.arc_titleImg.position:r.arc_obj.arc_titleImg.parent.position),size:{width:r.arc_obj.arc_titleImg.width?r.arc_obj.arc_titleImg.width:r.arc_obj.arc_titleImg.size.width,height:r.arc_obj.arc_titleImg.height?r.arc_obj.arc_titleImg.height:r.arc_obj.arc_titleImg.size.height},arc:g.a.cloneDeep(r.arc_obj.arc_titleImg.arc)}):"arc_subtitle"==t&&(n=g.a.cloneDeep(r.arc_obj.arc_subtitle),i={position:g.a.cloneDeep(r.arc_obj.arc_subtitleImg.position.x?r.arc_obj.arc_subtitleImg.position:r.arc_obj.arc_subtitleImg.parent.position),size:{width:r.arc_obj.arc_subtitleImg.width?r.arc_obj.arc_subtitleImg.width:r.arc_obj.arc_subtitleImg.size.width,height:r.arc_obj.arc_subtitleImg.height?r.arc_obj.arc_subtitleImg.height:r.arc_obj.arc_subtitleImg.size.height},arc:g.a.cloneDeep(r.arc_obj.arc_subtitleImg.arc)});for(var o=1;o<=e.length;o++){var c=e[o-1],s=g.a.cloneDeep(n);s.id+="".concat(o);var l=parseInt(i.arc.arc_deg)/e.length/2,_=0,d=0;_=i.position.x;var h=90+parseInt(i.arc.arc_deg)/2,p=0,v=0;"down"==i.arc.direction?(d=i.position.y-i.size.height/2+parseInt(i.arc.centerToTop)+parseInt(i.arc.radius),p=_+parseInt(i.arc.radius)*Math.cos((-l*(2*o-1)+h)*Math.PI/180),v=d-parseInt(i.arc.radius)*Math.sin((-l*(2*o-1)+h)*Math.PI/180),h=(90-(h-l*(2*o-1)))*Math.PI/180):(h=-h,d=i.position.y+i.size.height/2-parseInt(i.arc.centerToTop)-parseInt(i.arc.radius),p=_+parseInt(i.arc.radius)*Math.cos((l*(2*o-1)+h)*Math.PI/180),v=d-parseInt(i.arc.radius)*Math.sin((l*(2*o-1)+h)*Math.PI/180),h=(-90-(h+l*(2*o-1)))*Math.PI/180),s.position.x=p,s.position.y=v,s.text=c,s.rotation=h,s.role="normal",s.textReplace=a,r.newContainerText(s,!0,!0)}r.renderStage()}}},y=(a("fd7a"),a("d6b5"),a("e669"),a("acf5"),a("d331"),a("89cc"),a("323e"),a("b3a0"),a("70997"),a("08e9"),a("343d"),a("d849"),a("c1e0"),a("8e76"),a("9d96"),a("a3bd"),a("5ab7"),a("af5d"),a("bdbb"),a("429e"),a("2df1"),a("c20b"),a("1aa6"),a("808d"),a("ee95"),a("cb16"),a("d63e"),a("c96f"),a("6254"),a("3108"),{methods:{arrToAss:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this;if(t.length>1){var n=(new Date).valueOf();-1==e&&(e="association_".concat(n));var i=t[1].m_comp_name,o=t.every((function(t){if("association_gap_notT"==t.type||t.m_comp_name==i)return!0}));if(o){for(var c=0;c<t.length;c++)"association_gap_notT"==t[c].type||(t[c].association_name=e);r.createAssociation(e,i,a)}else alert("不同归属模块的元素不能组合")}r.updateLayer()},moveOutLine:function(t,e,a){var r=this;r.outLine_container.getChildByName(a.name).position.set(t,e)},changeAssociation:function(t){if(t.change){for(var e=this,a=[],r=[],n=0;n<e.ctrl_arr.length;n++)if(t.association_name==e.ctrl_arr[n].association_name&&"association_gap_notT"!==e.ctrl_arr[n].type)for(var i=e.ctrl_arr[n].vertexData,o=0;o<i.length;o++)o%2==0||0==o?a.push(i[o]):r.push(i[o]);a.sort((function(t,e){return t-e})),r.sort((function(t,e){return t-e}));var c=a[a.length-1]-a[0],s=r[r.length-1]-r[0];t.clear(),t.width=c,t.height=s,t.originalw=c,t.originalh=s,t.rotation_num=0,t.rotation=0,t.beginFill(15132410,.1),t.alpha=.01,t.drawRect(0,0,c,s),t.endFill(),t.x=a[0]-(e.window_w-e.canvas_width)/2,t.y=r[0]-(e.window_h-e.canvas_height)/2,t.centerX=t.x+t.width/2,t.centerY=t.y+t.height/2,t.change=!1}},downloadImg:function(t){fetch(t).then((function(t){return t.blob().then((function(t){var e=document.createElement("a"),a=window.URL.createObjectURL(t),r="myImg.png";e.href=a,e.download=r,e.click(),window.URL.revokeObjectURL(a)}))}))},toImage2:function(t){var e=this,a=new Array(4).fill(0),r=Object(o["a"])(a,4),n=r[0],i=r[1],c=r[2],s=r[3],l=[];if(e.ctrl_arr.length>0){if(e.temporary_rect)n=e.temporary_rect.width,i=e.temporary_rect.height,c=e.temporary_rect.centerX,s=e.temporary_rect.centerY;else for(var d=0;d<e.ctrl_arr.length;d++)"association_gap_notT"==e.ctrl_arr[d].type&&(n=e.ctrl_arr[d].width,i=e.ctrl_arr[d].height,c=e.ctrl_arr[d].centerX,s=e.ctrl_arr[d].centerY);for(var h=0;h<e.ctrl_arr.length;h++){var p={};"association_gap_notT"!==e.ctrl_arr[h].type&&"text"!==e.ctrl_arr[h].type?(p={src:e.ctrl_arr[h].srcData,x:n/2-(c-e.ctrl_arr[h].parent.x),y:i/2-(s-e.ctrl_arr[h].parent.y),scale:e.ctrl_arr[h].scale.x,rotation:e.ctrl_arr[h].parent.rotation,type:e.ctrl_arr[h].type,alpha:e.ctrl_arr[h].alpha},l.push(p)):"text"==e.ctrl_arr[h].type&&(p=_.cloneDeep(e.ctrl_arr[h]),p.position.set(n/2-(c-e.ctrl_arr[h].parent.position.x),i/2-(s-e.ctrl_arr[h].parent.position.y)),l.push(p))}}else if(e.in_move&&""==e.in_move.association_name){n=e.in_move.width,i=e.in_move.height;var v={};"text"!==e.in_move.type?v={src:e.in_move.srcData,x:n/2,y:i/2,scale:e.in_move.scale.x,rotation:e.in_move.parent.rotation,type:e.in_move.type,alpha:e.in_move.alpha}:"text"==e.in_move.type&&(v=_.cloneDeep(e.in_move),v.position.set(e.in_move.parent.position.x,e.in_move.parent.position.y)),l.push(v)}e.img_app=null,e.img_app=new e.mypixi.Application({backgroundColor:16711680,width:n,height:i,antialias:1});var m=new e.mypixi.Container;m.width=n,m.height=i,m.position.set(0,0),m=e.addImgTwo(m,l),e.img_app.stage.addChild(m);var u=e.img_app.renderer.plugins.extract.base64(e.img_app.stage);if(t)return e.dataURLtoFile(u,"association_img.png");e.downloadImg(u),e.$set(e.right_block,"show",!1)},addImgTwo:function(t,e){var a=this;e=e.reverse();for(var r=0;r<e.length;r++)if("text"!==e[r].type){var n=new a.mypixi.Sprite(a.p_app.loader.resources[e[r].src].texture);n.anchor.set(.5),n.position.set(e[r].x,e[r].y),n.scale.set(e[r].scale),n.rotation=e[r].rotation,n.alpha=e[r].alpha,t.addChild(n)}else"text"==e[r].type&&t.addChild(e[r]);return t},idToImg:function(t){var e=this;e.addACtrlarr(t[0]);var a=e.toImage(!0),r=new FormData;r.append("upload_file_once",a),p()({method:"post",url:"".concat(e.api.upload_file_once,"1.html"),data:r}).then((function(t){return t.data.file_id}))},dataURLtoFile:function(t,e){var a=t.split(","),r=a[0].match(/:(.*?);/)[1],n=atob(a[1]),i=n.length,o=new Uint8Array(i);while(i--)o[i]=n.charCodeAt(i);return new File([o],e,{type:r})},findCont:function(t){for(var e=this,a=-1,r=0;r<e.container_arr.length;r++)e.container_arr[r].name==t&&(a=r);return a},locationMove:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=this;if(!a.temporary_rect&&a.in_move){var r=0;if("up"==t||"down"==t||"middle"==t){r=a.in_move.vertexData[1];for(var n=3;n<8;n+=2)"down"==t?a.in_move.vertexData[n]>r&&(r=a.in_move.vertexData[n]):"up"==t&&a.in_move.vertexData[n]<r&&(r=a.in_move.vertexData[n])}else if("left"==t||"right"==t||"center"==t){r=a.in_move.vertexData[0];for(var i=2;i<8;i+=2)"left"==t?a.in_move.vertexData[i]<r&&(r=a.in_move.vertexData[i]):"right"==t&&a.in_move.vertexData[i]>r&&(r=a.in_move.vertexData[i])}var o=a.in_move.parent.y;"down"==t?a.in_move.parent.y=a.canvas_height-(r-(a.window_h-a.canvas_height)/2-o)+e:"up"==t?a.in_move.parent.y=o-(r-(a.window_h-a.canvas_height)/2)+e:"middle"==t?a.in_move.parent.y=a.canvas_height/2+e:"left"==t?a.in_move.parent.x=a.in_move.parent.x-(r-(a.window_w-a.canvas_width)/2)+e:"right"==t?a.in_move.parent.x=a.canvas_width-(r-(a.window_w-a.canvas_width)/2-a.in_move.parent.x)+e:"center"==t&&(a.in_move.parent.x=a.canvas_width/2+e),a.moveOutLine(a.in_move.parent.x,a.in_move.parent.y,a.in_move),""!==a.in_move.association_name&&a.aSingleClickBorder(a.in_move.association_name)}else if(a.temporary_rect){var c=0,s=0;if("up"==t||"down"==t||"middle"==t){c=a.temporary_rect.vertexData[1];for(var l=3;l<8;l+=2)"up"==t?a.temporary_rect.vertexData[l]<c&&(c=a.temporary_rect.vertexData[l]):"down"==t&&a.temporary_rect.vertexData[l]>c&&(c=a.temporary_rect.vertexData[l])}else if("left"==t||"right"==t||"center"==t){c=a.temporary_rect.vertexData[0];for(var _=2;_<8;_+=2)"left"==t?a.temporary_rect.vertexData[_]<c&&(c=a.temporary_rect.vertexData[_]):"right"==t&&a.temporary_rect.vertexData[_]>c&&(c=a.temporary_rect.vertexData[_])}"up"==t?s=a.temporary_rect.centerY-(a.temporary_rect.centerY-(c-(a.window_h-a.canvas_height)/2)):"down"==t?s=-(a.canvas_height-(c-(a.window_h-a.canvas_height)/2-a.temporary_rect.centerY)-a.temporary_rect.centerY):"middle"==t?(s=a.canvas_height/2-a.temporary_rect.centerY,s=-s):"left"==t?s=a.temporary_rect.centerX-(a.temporary_rect.centerX-(c-(a.window_w-a.canvas_width)/2)):"right"==t?s=-(a.canvas_width-(c-(a.window_w-a.canvas_width)/2-a.temporary_rect.centerX)-a.temporary_rect.centerX):"center"==t&&(s=a.canvas_width/2-a.temporary_rect.centerX,s=-s);for(var d=0;d<a.ctrl_arr.length;d++)"association_gap_notT"==a.ctrl_arr[d].type?("up"==t||"down"==t||"middle"==t?(a.ctrl_arr[d].y-=s,a.ctrl_arr[d].centerY-=s):"left"!=t&&"right"!=t&&"center"!=t||(a.ctrl_arr[d].x-=s,a.ctrl_arr[d].centerX-=s),a.moveOutLine(a.ctrl_arr[d].centerX,a.ctrl_arr[d].centerY,a.ctrl_arr[d])):("up"==t||"down"==t||"middle"==t?a.ctrl_arr[d].parent.y-=s:"left"!=t&&"right"!=t&&"center"!=t||(a.ctrl_arr[d].parent.x-=s),a.moveOutLine(a.ctrl_arr[d].parent.x,a.ctrl_arr[d].parent.y,a.ctrl_arr[d]));"up"==t||"down"==t||"middle"==t?(a.temporary_rect.y-=s,a.temporary_rect.centerY-=s):"left"!=t&&"right"!=t&&"center"!=t||(a.temporary_rect.x-=s,a.temporary_rect.centerX-=s),a.moveOutLine(a.temporary_rect.centerX,a.temporary_rect.centerY,a.temporary_rect)}else if(!a.temporary_rect&&a.ctrl_arr.length>0){for(var h=0,p=0,v=0,m=0;m<a.ctrl_arr.length;m++)if("association_gap_notT"==a.ctrl_arr[m].type){if(v=m,"up"==t||"down"==t||"middle"==t){h=a.ctrl_arr[m].vertexData[1];for(var u=1;u<8;u+=2)"up"==t?a.ctrl_arr[m].vertexData[u]<h&&(h=a.ctrl_arr[m].vertexData[u]):"down"==t&&a.ctrl_arr[m].vertexData[u]>h&&(h=a.ctrl_arr[m].vertexData[u])}else if("left"==t||"right"==t||"center"==t){h=a.ctrl_arr[m].vertexData[0];for(var g=2;g<8;g+=2)"left"==t?a.ctrl_arr[m].vertexData[g]<h&&(h=a.ctrl_arr[m].vertexData[g]):"right"==t&&a.ctrl_arr[m].vertexData[g]>h&&(h=a.ctrl_arr[m].vertexData[g])}"up"==t?p=a.ctrl_arr[m].centerY-(a.ctrl_arr[m].centerY-(h-(a.window_h-a.canvas_height)/2)):"down"==t?p=-(a.canvas_height-(h-(a.window_h-a.canvas_height)/2-a.ctrl_arr[m].centerY)-a.ctrl_arr[m].centerY):"middle"==t?(p=a.canvas_height/2-a.ctrl_arr[m].centerY,p=-p):"left"==t?p=a.ctrl_arr[m].centerX-(a.ctrl_arr[m].centerX-(h-(a.window_w-a.canvas_width)/2)):"right"==t?p=-(a.canvas_width-(h-(a.window_w-a.canvas_width)/2-a.ctrl_arr[m].centerX)-a.ctrl_arr[m].centerX):"center"==t&&(p=a.canvas_width/2-a.ctrl_arr[m].centerX,p=-p)}for(var f=0;f<a.ctrl_arr.length;f++)"association_gap_notT"!==a.ctrl_arr[f].type&&("up"==t||"down"==t||"middle"==t?a.ctrl_arr[f].parent.y-=p:a.ctrl_arr[f].parent.x-=p,a.moveOutLine(a.ctrl_arr[f].parent.x,a.ctrl_arr[f].parent.y,a.ctrl_arr[f]));setTimeout((function(){a.ctrl_arr[v].change=!0,a.changeAssociation(a.ctrl_arr[v]);var t=a.ctrl_arr[v].association_name;a.renderTLine(!1,!0,t)}),30)}a.pushActiveLog(!0)},lockFunc:function(){var t=this;if(t.$set(t.right_block,"show",!1),t.in_move&&0==t.ctrl_arr.length&&""==t.in_move.association_name)t.in_move.lock=!0,t.containerLine(t.in_move,!1,!0,!1,!0);else if(!t.temporary_rect&&t.ctrl_arr.length>0){for(var e=0;e<t.ctrl_arr.length;e++)t.ctrl_arr[e].lock=!0;t.renderTLine(!1,!0,t.ctrl_arr[0].association_name,!0)}t.$set(t.edit_bar.btn,"show",!1)},unlockFunc:function(){var t=this;if(t.$set(t.right_block,"show",!1),t.in_move&&0==t.ctrl_arr.length&&""==t.in_move.association_name)t.in_move.lock=!1,t.containerLine(t.in_move,!1,!0);else if(!t.temporary_rect&&t.ctrl_arr.length>0){for(var e=0;e<t.ctrl_arr.length;e++)t.ctrl_arr[e].lock=!1;t.renderTLine(!1,!0,t.ctrl_arr[0].association_name,!1),t.click_ass_id=t.ctrl_arr[0].association_name}t.$set(t.edit_bar.btn,"show",!0)},updateLayer:function(){for(var t=this,e=[],a=function(a){if("temporary_rect"!==t.container_arr[a].cont.children[0].type&&"association_gap_notT"!==t.container_arr[a].cont.children[0].type&&"notSave"!==t.container_arr[a].cont.children[0].type){var r={},n=t.container_arr[a].cont.children[0];if(r.type=t.container_arr[a].cont.children[0].type,r.srcData=t.container_arr[a].cont.children[0].srcData,r.text=t.container_arr[a].cont.children[0].text,r.id=t.container_arr[a].cont.children[0].name,r.role=t.container_arr[a].cont.children[0].role,r.replacePosition=t.container_arr[a].cont.children[0].replacePosition,"text"==n.type&&(r.color=n.style.fill,r.fontSize=.3*n.style.fontSize,r.fontSize<=14&&(r.fontSize=14),r.fontSize>=52&&(r.fontSize=52),n.textPosition&&(r.textPosition=n.textPosition),r.fontFamily=n.style.fontFamily,n.style.dropShadow?(r.dropShadow=!0,r.dropShadowColor=n.style.dropShadowColor,r.dropShadowBlur=n.style.dropShadowBlur/2):r.dropShadowColor="rgba(0,0,0,0)"),r.select=!1,t.in_move&&t.container_arr[a].cont.children[0].name==t.in_move.name)r.select=!0;else if(!t.in_move&&t.ctrl_arr&&t.ctrl_arr.length>0){var i=t.ctrl_arr.some((function(e){return e.name==t.container_arr[a].cont.children[0].name}));i&&(r.select=!0)}e.push(r)}},r=0;r<t.container_arr.length;r++)a(r);d["a"].$emit("update-layer",e)},pushActiveLog:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this;if(e.after_move||e.after_scale||e.after_rotate||e.after_stretch||t){for(var a="",r={m_comp_name:"product",children:[{ass_children:[],association_id:""}]},n={src:"",type:"",id:"",m_comp_name:"product",rotation:0,scale:1,position:{x:0,y:0},text:"",style:{},alpha:1,size:{},arc:{},skew:{}},i=[],o={},c=0;c<e.container_arr.length;c++)if("temporary_rect"!==e.container_arr[c].cont.children[0].type&&"association_gap_notT"!==e.container_arr[c].cont.children[0].type&&"notSave"!==e.container_arr[c].cont.children[0].type){var s=e.container_arr[c].cont.children[0],l=_.cloneDeep(n);if((""==s.association_name||""!==s.association_name&&s.association_name!==a)&&(o.children&&o.children[0].ass_children.length>=1&&i.push(o),o=_.cloneDeep(r)),""!==s.association_name&&(o.children[0].association_id=s.association_name,a=s.association_name),"image"===s.type)l.src=s.srcData,l.type="image",l.file_id=s.file_id,l.size.width=s.width,l.size.height=s.height,l.replacePosition=s.replacePosition,-1!==s.role.search("arc")&&(l.arc=e.arc_obj[s.role].arc);else if("text"===s.type){l.type="text";var h={fontFamily:"思源黑体",fontSize:50,lineHeight:60,fontStyle:"normal",fontWeight:"bold",fill:"#000",stroke:"#000",strokeThickness:0,dropShadow:!1,dropShadowColor:"#000000",dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowDistance:18,wordWrap:!0,wordWrapWidth:300,breakWords:!0,padding:50,textBaseline:"Middle",trim:!1,whiteSpace:"normal",leading:0,letterSpacing:0,align:"left"};for(var p in h)h[p]=s.style[p];l.style=h,l.style.fontSize=Math.floor(l.style.fontSize),l.text=s.text,l.size.width=s.width,l.size.height=s.height,l.textReplace=s.textReplace,l.textPosition=s.textPosition,l.textReverse=s.textReverse}l.id=s.name,l.rotation=s.rotation,l.scale=s.scale.x,l.position.x=s.parent.x,l.position.y=s.parent.y,l.alpha=s.alpha,l.role=s.role,l.skew={x:s.skew.x,y:s.skew.y},l.hueNumber=s.hueNumber,o.children[0].ass_children.push(l),c==e.container_arr.length-1&&i.push(o),s=null,l=null}e.active_log.length>=30&&e.active_log.splice(0,1),e.active_log.splice(e.active_index+1,30),e.active_log.push(i),e.$set(e,"active_index",e.active_log.length-1),e.$set(e,"after_move",!1),e.$set(e,"after_scale",!1),e.$set(e,"after_rotate",!1),e.$set(e,"after_stretch",!1),d["a"].$emit("mould_change")}},resetCanvas:function(){var t=this,e=document.body.clientWidth,a=document.body.clientHeight;a-=0;var r=e/a,n=t.canvas_width/t.canvas_height,i=0;n>=r?i=e/t.canvas_width:n<r&&(i=a/t.canvas_height),i-=.14,i=Math.floor(100*i)/100,t.$set(t,"canvas_scale",i),document.getElementById("pixiCanvas").style.transform="scale(".concat(i,") translateX(-").concat(t.window_w/2,"px)")},onresize:function(){var t=this,e=null;return function(){e&&(clearTimeout(e),e=null),e=setTimeout((function(){t.resetCanvas()}),100)}},canvasScale:function(t){var e=this,a=e.canvas_scale;"reduce"==t?a-=.05:a+=.05,a=Math.floor(100*a)/100,e.$set(e,"canvas_scale",a),document.getElementById("pixiCanvas").style.transform="scale(".concat(a,") translateX(-").concat(e.window_w/2,"px)")},showRuler:function(){var t=this;t.ruler_container.visible=!t.ruler_container.visible},json_f:function(t){return JSON.stringify(t)},obj_f:function(t){return JSON.parse(t)},moveStructureText:function(){var t=this;if(t.in_move.structure){var e=0,a=0;"title"==t.in_move.role?(e=75,a=50):"subtitle"==t.in_move.role&&(e=150,a=50),setTimeout((function(){t.locationMove("up",e),setTimeout((function(){t.locationMove("left",a)}),50)}),50)}},setRole:function(t){var e=this;-1!==t.search("arc")?p()({method:"GET",url:"arc_find_file?id=".concat(e.in_move.file_id)}).then((function(a){e.in_move.arc=JSON.parse(a.data.data.arc),e.$set(e.arc_obj,t,e.in_move),e.in_move.role=t,e.updateLayer(),e.pushActiveLog(!0),e.$set(e.right_block,"show",!1)})):"normal"!==t?e.$set(e.tempRoleMsg,t,e.tempRoleMsg[t]+=1):"normal"==t&&(-1!==e.in_move.role.search("arc")?e.$set(e.arc_obj,t,""):e.$set(e.tempRoleMsg,e.in_move.role,e.tempRoleMsg[e.in_move.role]-=1)),e.in_move.role=t,e.updateLayer(),e.pushActiveLog(!0),e.$set(e.right_block,"show",!1)},setPosition:function(t){var e=this;e.in_move.replacePosition=t,e.updateLayer(),e.pushActiveLog(!0),e.$set(e.right_block,"show",!1)},setReplaceText:function(){var t=this;t.$set(t,"mouldFuncShow",!0)},updateTextPosition:function(t){this.$set(this,"textPositionArr",t)},handleCommand:function(t){var e=Object(o["a"])(t,2),a=e[0],r=e[1],n=this;-1===a?(n.in_move.textReplace=null,n.in_move.textPosition=""):(n.in_move.textReplace=a,n.in_move.textPosition=r),n.updateLayer(),n.pushActiveLog(!0),n.$set(n.right_block,"show",!1)},recommendText:function(t){var e=this;e.fullscreenLoading=!0;for(var a=t,r=new Map,n={},c=0;c<e.container_arr.length;c++)if("number"==typeof e.container_arr[c].cont.children[0].textReplace){var s=e.container_arr[c].cont.children[0].textReplace;r.set(s,r.get(s)?[].concat(Object(i["a"])(r.get(s)),[e.container_arr[c].cont.children[0]]):[e.container_arr[c].cont.children[0]]),n["".concat(e.container_arr[c].cont.children[0].style.fontFamily)]=(n["".concat(e.container_arr[c].cont.children[0].style.fontFamily)]?n["".concat(e.container_arr[c].cont.children[0].style.fontFamily)]:"")+a[s]}e.getfontFamilyBack(n).then((function(){setTimeout((function(){var t=!0,n=!1,i=void 0;try{for(var c,s=r[Symbol.iterator]();!(t=(c=s.next()).done);t=!0){var l=Object(o["a"])(c.value,2),_=l[0],d=l[1];if(d.length>1)for(var h=0,p=0;p<d.length;p++)d[p].text=a[_].slice(h,d[p].text.length+h),h+=d[p].text.length;else{d[0].width;if(d[0].textReverse){var v=a[_].split("");v=v.reverse(),d[0].text=v.join("")}else d[0].text=a[_];d[0].width}r.set(_,"")}}catch(m){n=!0,i=m}finally{try{t||null==s.return||s.return()}finally{if(n)throw i}}e.fullscreenLoading=!1,e.pushActiveLog(!0),e.updateLayer()}),300)}))},getfontFamilyBack:function(t){var e=this;return new Promise((function(a,r){e.getAllfontFamily(t).then((function(t){if("stf"===t)return a(),!1;for(var n=[],o=0;o<t.length;o++)1===t[o].data.code&&(n=[].concat(Object(i["a"])(n),Object(i["a"])(e.getCssWoff(t[o].data.path,t[o].data.woffPath))),e.dynamicLoadCss(e.api.file_path+t[o].data.path));p.a.all(n).then((function(t){setTimeout((function(){a()}),50)})).catch((function(t){r(t)}))})).catch((function(t){r(t)}))}))},textReverse:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this,a=t?t.split(""):e.in_move.text.split("");a=a.reverse(),e.in_move.text=a.join(""),e.in_move.textReverse=!0,e.pushActiveLog(!0)}}}),w=a("2303"),b=a.n(w),x=a("0633"),k=a.n(x),C=a("725c"),S=a.n(C);a("2b36");function A(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function T(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?A(Object(a),!0).forEach((function(e){Object(c["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}document.oncontextmenu=function(){event.returnValue=!1};var L={mixins:[m,f,y],name:"Canvas",props:{msg:String},data:function(){return{reRender:!0,scale:b.a,rotate:k.a,stretch:S.a,p_app:null,img_app:null,r_btn_h:30,association:[],ass_r_data:{},container_arr:[],outLine_container:null,mainStage_container:null,ruler_container:null,in_move:null,temporary_rect:null,ctrl_arr:[],img_loading:!1,click_ass_id:"",can_scale:0,can_rotate:0,can_stretch:0,after_move:!1,after_scale:!1,after_rotate:!1,after_stretch:!1,canvas_scale:1,addPop:!1,right_block:{rb_left:"0px",rb_top:"0px",show:!1,menu:{ass:1,lock:!1,del:!0,top:!1,bot:!1,cop:!0,show_lock:!1,change:!1,edit_text:!1},delete_type:0,lock_text:"锁定",unlock_text:"解锁"},edit_bar:{btn:{show:!1,text:!0,location:!0,rotation:!0,opacity:!0,updown:!0,delete:!0,color:!0,align:!0,shadow:!0,edit:!0,change_image:!0,skew:!0,hue:!0},edit_text:!1,edit_location:!1,edit_layer:!1,edit_color:!1,edit_align:!1,edit_shadow:!1,edit_fontFamily_select:!1,edit_rotation:!1,edit_skew:!1,edit_hue:!1,edit_opacity:!1,text:{fontSize:0,leading:0,letterSpacing:0,fontStyle:"normal",fontWeight:"normal",color:"#000000",fontFamily:"default",align:"center",dropShadow:!1,dropShadowColor:"#000000",dropShadowBlur:0,dropShadowDistance:5},fontFamily:[{name:"默认",value:"default"},{name:"思源黑体-Bold",value:"syht_bold"},{name:"Adobe 黑体 Std",value:"adobehtstd"},{name:"华文宋体",value:"STSong"},{name:"苹方黑体",value:"pfht"},{name:"日本花园明朝体",value:"japanhymc"},{name:"杨任东竹石体-Bold",value:"yrdzsl-Bold"},{name:"方正粗黑繁体",value:"fzchft"},{name:"方正美黑繁体",value:"fzmhft"},{name:"方正美黑简体",value:"fzmhjt"},{name:"方正姚体繁体",value:"fzytft"},{name:"方正华隶繁体",value:"FZHLFW"},{name:"方正华隶_GBK",value:"fzhlgbk"},{name:"方正祥隶繁体",value:"fzxlft"},{name:"方正魏碑繁体",value:"fzwbft"},{name:"方正琥珀繁体",value:"fzhpft"},{name:"方正综艺繁体",value:"fzzyft"},{name:"方正综艺简体",value:"fzzyjt"},{name:"方正正粗黑",value:"fzzch"},{name:"方正艺黑体",value:"fzyht"},{name:"方正牟氏黑隶简体",value:"fzmshljt"},{name:"方正大黑简体",value:"fzdhjt"},{name:"方正方魅简体",value:"fzfmjt"},{name:"方正粗圆_GBK",value:"fzcygbk"},{name:"方正准雅宋_GBK",value:"fzzys_gbk"},{name:"方正像素24",value:"fzxs24"},{name:"方正像素14",value:"fzxs14"},{name:"方正点阵",value:"fzdz"},{name:"方正幼线",value:"fzyx"},{name:"方正兰亭中粗黑_GBK",value:"fzltzch_gbk"},{name:"方正粗活意简体",value:"fzchyjt"},{name:"方正粗雅宋扁繁体",value:"fzcysbft"},{name:"方正吕建德楷体",value:"fzljdkt"},{name:"方正黑体_GBK",value:"fzht_gbk"},{name:"方正大标宋_GBK",value:"fzdbs"},{name:"方正大标宋简体",value:"fzdbsjt"},{name:"方正青刻宋体",value:"fzqkst"},{name:"方正特粗光辉简体",value:"fztcghjt"},{name:"方正剑体简体",value:"fzjtjt"},{name:"方正古隶简体",value:"fzgljt"},{name:"华康勘亭流_简&繁",value:"hkktlj"},{name:"华康宋体W12",value:"hkstw12"},{name:"叶根友特楷简体",value:"ygytkjt"},{name:"建行儒黑中",value:"jhrhz"},{name:"汉仪铸字苏打黑",value:"hyzzsdh"},{name:"汉仪家书简",value:"hyjsj"},{name:"TTTGB",value:"tttgb"},{name:"潮字社凌渡鲲鹏简",value:"czsldkpj"},{name:"华康翩翩",value:"hkpp"},{name:"ALBA",value:"alba"},{name:"Adobe仿宋",value:"adobefs"},{name:"Adobe黑体",value:"adobeht"},{name:"汉仪迪升英雄体",value:"hydsyxt"},{name:"百度综艺简体",value:"bdzyjt"},{name:"锐字真言体",value:"myrzzyt"},{name:"锐字锐线怒放黑简",value:"rzrxnfhj"},{name:"明朝宋体",value:"mcst"},{name:"游明朝体",value:"ymct"},{name:"华文楷体",value:"hwkt"},{name:"Herculanum",value:"Herculanum"}],align:[{value:"left",label:"居左"},{value:"center",label:"居中"},{value:"right",label:"居右"}],opacity:100,rotation:0,skewX:0,skewY:0,hue:0},active_log:[],active_index:-1,render_data:[{m_comp_name:"product",z_index:1,children:[{ass_children:[{src:"",type:"image",id:"image123",m_comp_name:"product",rotation:0,scale:1,position:{x:277.7,y:392.9},text:"",alpha:1}],association_id:""}]}],textTime:!0,tempRoleMsg:{main:0,logo:0,title:0,subtitle:0,bg:0},arc_obj:{arc_title:"",arc_subtitle:"",arc_titleImg:"",arc_subtitleImg:"",title_obj:null,subtitle_obj:null},father_id:"",thisTempLevel:"",mouldFuncShow:!1,textPositionArr:[],saveTextRule:!1,openF:"text",defaultTextFamily:"STSongdefault",fullscreenLoading:!0}},computed:T({},Object(l["b"])({window_w:function(t){return t.homeCanvas.window_w},window_h:function(t){return t.homeCanvas.window_h},canvas_width:function(t){return t.homeCanvas.canvas_width},canvas_height:function(t){return t.homeCanvas.canvas_height},project_m_comp:function(t){return t.homeCanvas.project_m_comp},user_type:function(t){return t.user.user_type},tempId:function(t){return t.homeCanvas.tempId},mould_name:function(t){return t.homeCanvas.mould_name},structure_id:function(t){return t.homeCanvas.structure_id},user_data:function(t){return t.user.user_data},new_structure_id:function(t){return t.homeCanvas.new_structure_id},structure_position:function(t){return t.homeCanvas.structure_position},api:function(t){return t.api}}),{ffName:function(){var t=!0,e=!1,a=void 0;try{for(var r,n=this.edit_bar.fontFamily[Symbol.iterator]();!(t=(r=n.next()).done);t=!0){var i=r.value;if(i.value==this.edit_bar.text.fontFamily)return i.name}}catch(o){e=!0,a=o}finally{try{t||null==n.return||n.return()}finally{if(e)throw a}}return""},key_ctrlf:function(){var t=91,e=navigator.userAgent;e.indexOf("Trident")>-1||(e.indexOf("Presto")>-1?t=17:e.indexOf("AppleWebKit")>-1?t=91:e.indexOf("Gecko")>-1&&-1==e.indexOf("KHTML")&&(t=224));var a=this.keyboard(17,t);return a.press=function(){},a.release=function(){},a},key_zf:function(){var t=this.keyboard(90);return t.press=function(){},t.release=function(){},t},key_yf:function(){var t=this.keyboard(89);return t.press=function(){},t.release=function(){},t},key_upf:function(){var t=this.keyboard(38);return t.press=function(){},t.release=function(){},t},key_downf:function(){var t=this.keyboard(40);return t.press=function(){},t.release=function(){},t},key_leftf:function(){var t=this.keyboard(37);return t.press=function(){},t.release=function(){},t},key_rightf:function(){var t=this.keyboard(39);return t.press=function(){},t.release=function(){},t},right_block_ass:function(){return 1==this.right_block.menu.ass||2==this.right_block.menu.ass},canvas_ratio_arr:function(){var t=this,e=t.canvas_width,a=t.canvas_height,r=[],n=e,i=a;if(n>=i?(n=e,i=a):(n=a,i=e),1!=e&&1!=a)for(var o=i;o>=2;o--)e%o==0&&a%o==0&&(e/=o,a/=o);return r[0]=e,r[1]=a,r},mypixi:function(){return s},firstEdit:function(){return!!window.localStorage.getItem("firstEdit")}}),mounted:function(){},watch:{},beforeDestroy:function(){var t=this;t.$store.dispatch("changeTempIdFunc",""),window.onresize=null,t.p_app=null,t.data=function(){return null}},created:function(){var t=this;this.p_app=new s["Application"]({backgroundColor:16119285,width:t.window_w,height:t.window_h,antialias:1}),d["a"].$off("add_element_func").$off("layer_click").$off("addPopShow").$off("change_text").$off("designer_save").$off("client_save").$off("change_in_move_image").$off("canvasDestroy"),d["a"].$on("canvasDestroy",(function(){t.$destroy()})),d["a"].$on("add_element_func",(function(e){""!==e.src&&""==e.text?t.newContainer(e,!1,(function(){t.updateLayer(),t.pushActiveLog(!0)})):""==e.src&&""!==e.text&&(t.newContainerText(e,!1),t.updateLayer(),t.pushActiveLog(!0))})),d["a"].$on("layer_click",(function(e){t.show_click(e)})),d["a"].$on("addPopShow",(function(e){t.addPopShow(e)})),d["a"].$on("change_text",(function(e){var a={user_id:t.user_data.id,font_name:t.in_move.style.fontFamily,text:e};t.loadCutFont(a).then((function(a){t.in_move.textReverse?t.textReverse(e):t.in_move.text=e,t.inMoveChangeBorder(),t.moveStructureText(),t.pushActiveLog(!0)})).catch((function(t){return t}))})),d["a"].$on("designer_save",(function(e,a){t.saveMould(e,a)})),d["a"].$on("client_save",(function(e,a,r){t.saveMould(e,r,a)})),d["a"].$on("change_in_move_image",(function(e){t.changeInMoveImage(e)})),d["a"].$off("recommendText").$on("recommendText",(function(e){t.recommendText(e)})),d["a"].$off("editbarClose").$on("editbarClose",(function(){t.$set(t.edit_bar.btn,"show",!1)})),d["a"].$off("rightShow").$on("rightShow",(function(e){var a=document.body.clientWidth,r=document.body.clientHeight;t.$set(t.right_block,"rb_left","".concat(a/2-85,"px")),t.$set(t.right_block,"rb_top","".concat(r/2-150,"px")),t.right_block.show=e})),window.localStorage.getItem("firstEdit")||t.$set(t.edit_bar.btn,"show",!0),t.key_zf.press=function(){t.key_ctrlf.isDown&&!t.key_ctrlf.isUp&&t.moveActiveLog("prev")},t.key_yf.press=function(){t.key_ctrlf.isDown&&!t.key_ctrlf.isUp&&t.moveActiveLog("next")},t.key_upf.press=function(){t.moveInMove("up")},t.key_downf.press=function(){t.moveInMove("down")},t.key_leftf.press=function(){t.moveInMove("left")},t.key_rightf.press=function(){t.moveInMove("right")},window.onresize=t.onresize(),setTimeout((function(){t.tempId||t.structure_id?t.getTemplateData():t.initPixiApp()}),200)},methods:{moveInMove:function(t){var e=this;if(e.in_move){var a=0,r=0;switch(t){case"up":r=-1;break;case"down":r=1;break;case"left":a=-1;break;case"right":a=1;break}e.in_move.parent.position.set(e.in_move.parent.x+a,e.in_move.parent.y+r),e.pushActiveLog(!0)}},setSkew:function(){var t=this;t.in_move.skew.set(-.5,0)},changeHue:function(t){var e=this;e.in_move.hueNumber=t,t*=360;var a=new s["filters"].ColorMatrixFilter;a.hue(t,!0),e.in_move.filters=[a],e.pushActiveLog(!0)},dynamicLoadCss:function(t){var e=document.getElementsByTagName("head")[0],a=document.createElement("link");a.type="text/css",a.rel="stylesheet",a.href=t,e.appendChild(a)},getCssWoff:function(t,e){var a=this;return[p()({headers:{Accept:"text/css,*/*;q=0.1"},method:"get",url:"".concat(a.api.file_path).concat(t),responseType:"ms-stream"}),p()({method:"get",url:"".concat(a.api.file_path).concat(e),responseType:"ms-stream"})]},loadCutFont:function(t){var e=this;return new Promise((function(a,r){e.defaultTextFamily.includes(t.font_name)&&a(t.font_name),p()({method:"post",url:e.api.cutFont,data:t}).then((function(t){t=t.data,1==t.code?p.a.all(e.getCssWoff(t.path,t.woffPath)).then((function(r){e.dynamicLoadCss(e.api.file_path+t.path),setTimeout((function(){a(t)}),50)})).catch((function(t){})):r(t)})).catch((function(t){r(t)}))}))},getNewFont:function(t,e){},mouldImg:function(){var t=this;return t.cancelInMove(),t.ClippingImage(t.p_app.renderer.plugins.extract.base64(t.p_app.stage),t.canvas_width,t.canvas_height,.92,(function(t){return t}))},ClippingImage:function(t,e,a,r,n){var i=this,o=new Image;o.src=t;var c=document.createElement("canvas"),s=c.getContext("2d"),l=document.createAttribute("width"),_=document.createAttribute("height");l.nodeValue=e,_.nodeValue=a,c.setAttributeNode(_),c.setAttributeNode(l),o.onload=function(){s.drawImage(o,(i.window_w-i.canvas_width)/2,(i.window_h-i.canvas_height)/2,e,a,0,0,e,a);var t=c.toDataURL("image/jpeg",r);n(t)}},saveMould:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this,n=_.cloneDeep(r.active_log[r.active_log.length-1]);r.getMaterialData(n).then((function(n){var i=n;r.uploadMaterial(t,i,e,a)})).catch((function(t){d["a"].$emit("saveError")}))},getMaterialData:function(t){for(var e=this,a=[],r=0;r<t.length;r++)a.push(e.getMd(t[r]));return Promise.all(a)},getMd:function(t){var e=this;return new Promise((function(a,r){var n={};if(1==t.children[0].ass_children.length)"image"==t.children[0].ass_children[0].type?(n.material_type="img",n.file_id=e.json_f([parseInt(t.children[0].ass_children[0].file_id)]),n.author=e.user_data.id,n.preview=parseInt(t.children[0].ass_children[0].file_id),n.content=e.json_f(t)):"text"==t.children[0].ass_children[0].type&&(n["material_type"]="text",n["author"]=e.user_data.id,n["dimension_id"]=0,n["content"]=e.json_f(t),n["text_content"]=t.children[0].ass_children[0].text),a(n);else if(t.children[0].ass_children.length>1){for(var i=[],o=0;o<t.children[0].ass_children.length;o++)"image"==t.children[0].ass_children[o].type&&i.push(t.children[0].ass_children[o].file_id);n.material_type="whole",n.file_id=e.json_f(i),n.author=e.user_data.id,e.addACtrlarr(i[0]);var c=e.toImage(!0),s=new FormData;s.append("upload_file_once",c),p()({method:"post",url:"".concat(e.api.upload_file_once,"1.html"),data:s}).then((function(r){n.preview=r.data.data.file_id,n.content=e.json_f(t),a(n)})).catch((function(t){r(t)}))}}))},uploadMaterial:function(t,e,a,r){var n=this,i=[];n.uploadAllMaterial(e).then((function(e){for(var o=0;o<e.length;o++)i.push(parseInt(e[o].data.data.materialId));n.uploadTemp(t,i,a,r)})).catch((function(t){d["a"].$emit("saveError")}))},renderARCF:function(){var t=this;if(""!=t.arc_obj.arc_title&&""!=t.arc_obj.arc_titleImg&&"designer"==t.user_type){var e=t.arc_obj.arc_title.text.split("");t.renderARC("arc_title",e)}if(""!=t.arc_obj.arc_subtitle&&""!=t.arc_obj.arc_subtitleImg&&"designer"==t.user_type){var a=t.arc_obj.arc_subtitle.text.split("");t.renderARC("arc_subtitle",a)}},deleteARCF:function(){var t=this,e=0;if(""!=t.arc_obj.arc_title&&""!=t.arc_obj.arc_titleImg&&"designer"==t.user_type){var a=t.arc_obj.arc_title.text.split("");e+=a.length}if(""!=t.arc_obj.arc_subtitle&&""!=t.arc_obj.arc_subtitleImg&&"designer"==t.user_type){var r=t.arc_obj.arc_subtitle.text.split("");e+=r.length}var n=t.container_arr.length;t.container_arr.splice(n-e,e);for(var i=0;i<e;i++)t.mainStage_container.removeChildAt(n-e);t.renderStage()},uploadTemp:function(t,e,a,r){var n=this;n.cancelInMove();var i=1,o=1;n.renderARCF(),null!=n.arc_obj.title_obj&&(i=_.cloneDeep(n.arc_obj.title_obj.alpha),n.arc_obj.title_obj.alpha=0),null!=n.arc_obj.subtitle_obj&&(o=_.cloneDeep(n.arc_obj.subtitle_obj.alpha),n.arc_obj.subtitle_obj.alpha=0);var c=null;setTimeout((function(){var s=document.getElementById("pixiCanvas");n.p_app.render();var l=s.toDataURL("image/jpeg",1);n.ClippingImage(l,n.canvas_width,n.canvas_height,.92,(function(s){c=s,null!=n.arc_obj.title_obj&&(n.arc_obj.title_obj.alpha=i),null!=n.arc_obj.subtitle_obj&&(n.arc_obj.subtitle_obj.alpha=o),n.deleteARCF(),c=n.dataURLtoFile(c,"mould.jpg");var l=new FormData;l.append("upload_file_once",c),n.uploadImgF(l,n.axiosTempF,{material_id:e,mould_name:t,link:a,leave:r})}))}),400)},axiosTempF:function(t,e){var a=this,r=t.data.data.file_id,n="",i={preview:r,author:a.user_data.id,material_content:a.json_f(e.material_id),name:e.mould_name,id:"",t_width:a.canvas_width,t_height:a.canvas_height,level:n,has_product:0,has_logo:0,has_title:0,has_subtitle:0,condition:1,father_id:""};"client"==a.user_type?("storage"==a.thisTempLevel&&(i.id=parseInt(a.tempId)),i.level="storage",i.father_id=a.father_id):"designer"==a.user_type&&(i.author=a.user_data.id,a.tempId&&(i.id=parseInt(a.tempId)),i.level="permanent",a.new_structure_id&&(i.condition=2,i.framework_id=a.new_structure_id)),a.tempRoleMsg.main>0&&(i.has_product=1),a.tempRoleMsg.logo>0&&(i.has_logo=1),a.tempRoleMsg.title>0&&(i.has_title=1),a.tempRoleMsg.subtitle>0&&(i.has_subtitle=1),p()({method:"post",url:a.api.upload_template,data:i}).then((function(t){"designer"==a.user_type?(d["a"].$emit("designerSave"),a.new_structure_id&&a.$store.dispatch("changeNewStructureIdFunc",""),"permanent"===i.level&&a.textPositionArr.length>0&&a.saveTextRule&&p()({method:"post",url:a.api.add_word_rule,data:{template_id:parseInt(t.data.data.templateId),rule:a.textPositionArr}}).then((function(t){}))):"client"==a.user_type&&(a.$store.dispatch("changeTempIdFunc",parseInt(t.data.data.templateId)),d["a"].$emit("clientSave"),e.leave&&setTimeout((function(){window.location.href=e.link}),500))})).catch((function(){d["a"].$emit("saveError")}))},uploadImgF:function(t,e,a){var r=this;return p()({method:"post",url:"".concat(r.api.upload_file_once,"1.html"),data:t}).then((function(t){e.bind(r)(t,a)})).catch((function(t){d["a"].$emit("saveError")}))},uploadMF:function(t){var e=this;return p.a.post(e.api.upload_material,t)},uploadAllMaterial:function(t){for(var e=this,a=[],r=0;r<t.length;r++)a.push(e.uploadMF(t[r]));return Promise.all(a)},initPixiApp:function(){var t=this;t.p_app.loader.add([t.scale,t.rotate,t.stretch]).load((function(){t.p_app.view.id="pixiCanvas",document.getElementById("mainCanvas").appendChild(t.p_app.view),t.p_app.view.style.width=t.window_w+"px",t.p_app.view.style.height=t.window_h+"px",t.p_app.stage.off().on("mousedown",t.cancel_something),t.addCancleRect();var e=new s["Container"];e.width=t.canvas_width,e.height=t.canvas_height,e.position.set((t.window_w-t.canvas_width)/2,(t.window_h-t.canvas_height)/2),e.accessible=!0,t.mainStage_container=e,t.p_app.stage.addChild(t.mainStage_container),t.maskInit(),t.ruler(),t.resetCanvas(),t.tempId||t.structure_id?t.renderTemplate(!0):(t.fullscreenLoading=!1,t.renderStage()),e=null}))},getTemplateData:function(){var t=this;if(t.tempId){var e=parseInt(t.tempId);p()({method:"post",url:"".concat(t.api.template).concat(e,".html"),data:{condition:1}}).then((function(e){for(var a=[],r=0;r<e.data.data.material_content.length;r++)e.data.data.material_content[r].content&&a.push(t.obj_f(e.data.data.material_content[r].content));if(t.$set(t,"render_data",a),t.$store.dispatch("setCanvasFunc",[e.data.data.template_width,e.data.data.template_height]),t.$store.dispatch("ChangeRenderFunc",{key:"mould_name",value:e.data.data.template_name}),t.thisTempLevel=e.data.data.level,t.father_id=e.data.data.father_id,d["a"].$emit("getRecommend",t.father_id),e.data.data.rule&&e.data.data.rule.length>0){var n=[],i=!0,o=!1,c=void 0;try{for(var s,l=e.data.data.rule[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var _=s.value;n.push(_.rule_name)}}catch(h){o=!0,c=h}finally{try{i||null==l.return||l.return()}finally{if(o)throw c}}t.$set(t,"textPositionArr",n)}t.initPixiApp()})).catch((function(t){}))}else t.structure_id},cancel_something:function(t){var e=this;e.$set(e.right_block,"show",!1)},hide_edit_f:function(){var t=this;for(var e in t.edit_bar)e.startsWith("edit_")&&(t.edit_bar[e]=!1)},showEdit:function(t){var e=this,a={};switch(e.hide_edit_f(),e.in_move&&"text"==e.in_move.type&&e.in_move.structure&&(t="structure_text"),t){case"image":a={show:!0,text:!1,location:!0,rotation:!0,opacity:!0,updown:!0,delete:!0,color:!1,align:!1,shadow:!1,edit:!1,change_image:!0,skew:!0,hue:!0};break;case"text":a={show:!0,text:!0,location:!0,rotation:!0,opacity:!0,updown:!0,delete:!0,color:!0,align:!0,shadow:!0,edit:!0,change_image:!1,skew:!0,hue:!0};break;case"structure_text":a={show:!0,text:!0,location:!1,rotation:!1,opacity:!0,updown:!0,delete:!1,color:!0,align:!1,shadow:!0,edit:!0,change_image:!1,skew:!1};break;case"temporary":a={show:!0,text:!1,location:!0,rotation:!0,opacity:!1,updown:!1,delete:!0,color:!1,align:!1,shadow:!1,edit:!1,change_image:!1,skew:!1};break;case"association":a={show:!0,text:!1,location:!0,rotation:!1,opacity:!1,updown:!0,delete:!0,color:!1,align:!1,shadow:!1,edit:!1,change_image:!1,skew:!1};break;case"image_in":a={show:!0,text:!1,location:!0,rotation:!0,opacity:!0,updown:!1,delete:!1,color:!1,align:!1,shadow:!1,edit:!1,change_image:!0,skew:!0,hue:!0};break;case"text_in":a={show:!0,text:!0,location:!0,rotation:!0,opacity:!0,updown:!1,delete:!1,color:!0,align:!0,shadow:!0,edit:!0,change_image:!1,skew:!0,hue:!0};break}e.change_edit_bar(a),e.updateLayer()},change_edit_bar:function(t){var e=this;for(var a in e.edit_bar.btn)e.$set(e.edit_bar.btn,a,t[a])},showEditLocation:function(){var t=this;t.hide_edit_f(),t.$set(t.edit_bar,"edit_location",!0)},showEditAlign:function(){var t=this;t.hide_edit_f(),t.$set(t.edit_bar,"edit_align",!0)},show_text_block:function(){var t=this;t.hide_edit_f(),t.updateText(),t.$set(t.edit_bar,"edit_text",!0)},updateText:function(){var t=this,e={fontSize:Math.floor(t.in_move.style.fontSize),leading:t.in_move.style.leading,letterSpacing:t.in_move.style.letterSpacing,fontStyle:t.in_move.style.fontStyle,fontWeight:t.in_move.style.fontWeight,color:t.in_move.style.fill,fontFamily:t.in_move.style.fontFamily,align:t.in_move.style.align,dropShadow:t.in_move.style.dropShadow,dropShadowColor:t.in_move.style.dropShadowColor,dropShadowBlur:t.in_move.style.dropShadowBlur,dropShadowDistance:t.in_move.style.dropShadowDistance};t.$set(t.edit_bar,"text",e)},fontFamily_change:function(t){var e=this;if(t==e.in_move.style.fontFamily)return!1;if(e.defaultTextFamily.includes(t))return e.in_move.style.fontFamily=t,e.$set(e.edit_bar,"edit_fontFamily_select",!1),e.updateText(),e.pushActiveLog(!0),!1;var a={user_id:e.user_data.id,font_name:t,text:e.in_move.text};e.loadCutFont(a).then((function(a){e.in_move.style.fontFamily=t,e.$set(e.edit_bar,"edit_fontFamily_select",!1),e.updateText(),e.updateLayer(),e.pushActiveLog(!0)})).catch((function(t){return t}))},showFontFamily:function(){var t=this;t.$set(t.edit_bar,"edit_fontFamily_select",!0)},fontSize_change:function(t){t=parseInt(t);var e=this,a=e.in_move.width/e.in_move.style.fontSize;e.in_move.text_num=a;var r=e.in_move.style;r.wordWrapWidth=a*t,"normal"==e.in_move.style.fontStyle&&(r.wordWrapWidth+=.2*r.fontSize),e.in_move.style=r,e.in_move.style.fontSize=t,e.containerLine(e.in_move,!1,!0),e.scaleTextEnd(e.in_move),e.pushActiveLog(!0)},alignChange:function(t){var e=this;e.in_move.style.align=t,e.pushActiveLog(!0)},fontStyle_change:function(t){var e=this;t?(e.in_move.style.fontStyle="italic",e.$set(e.edit_bar.text,"fontStyle","italic")):(e.in_move.style.fontStyle="normal",e.$set(e.edit_bar.text,"fontStyle","normal")),e.pushActiveLog(!0)},fontWeightChange:function(t){var e=this;t?(e.in_move.style.fontWeight="bolder",e.$set(e.edit_bar.text,"fontWeight","bolder")):(e.in_move.style.fontWeight="normal",e.$set(e.edit_bar.text,"fontWeight","normal")),e.pushActiveLog(!0)},leading_change:function(t){t=parseInt(t);var e=this;e.in_move.style.leading=t,e.containerLine(e.in_move,!1,!0),e.pushActiveLog(!0)},letterSpacing_change:function(t){t=parseInt(t);var e=this;e.in_move.style.letterSpacing=t,e.containerLine(e.in_move,!1,!0),e.pushActiveLog(!0)},fontColor_change:function(t){var e=this;e.in_move.style.fill=t,e.pushActiveLog(!0)},dropShadow:function(t){var e=this;e.in_move.style.dropShadow=t,e.inMoveChangeBorder(),e.updateLayer(),e.pushActiveLog(!0)},inMoveChangeBorder:function(){var t=this;t.ctrl_arr&&0==t.ctrl_arr.length||!t.ctrl_arr?t.containerLine(t.in_move,!1,!0):t.ctrl_arr&&t.ctrl_arr.length>0&&t.aSingleClickBorder(t.in_move.association_name)},dropShadowColorChange:function(t){var e=this,a=e.colorRGB2Hex(t);e.in_move.style.dropShadowColor=a,e.updateLayer(),e.pushActiveLog(!0)},colorRGB2Hex:function(t){var e=t.split(","),a=parseInt(e[0].split("(")[1]),r=parseInt(e[1]),n=parseInt(e[2].split(")")[0]),i="#"+((1<<24)+(a<<16)+(r<<8)+n).toString(16).slice(1);return i},dropShadowBlurChange:function(t){var e=this;e.in_move.style.dropShadowBlur=t,e.containerLine(e.in_move,!1,!0),e.pushActiveLog(!0)},dropShadowDistanceChange:function(t){var e=this;e.in_move.style.dropShadowDistance=t,e.containerLine(e.in_move,!1,!0),e.pushActiveLog(!0)},onEdit:function(){var t=this;t.hide_edit_f(),t.$set(t.right_block,"show",!1),t.$set(t,"addPop",!0),d["a"].$emit("text_edit_mode",t.in_move.text)},show_opacity_block:function(){var t=this;t.hide_edit_f(),t.$set(t.edit_bar,"opacity",100*t.in_move.alpha),t.$set(t.edit_bar,"edit_opacity",!0)},show_hue_block:function(){var t=this;t.hide_edit_f(),t.edit_bar.hue=t.in_move.hueNumber,t.$set(t.edit_bar,"edit_hue",!0)},showLayerBlock:function(){var t=this;t.hide_edit_f(),t.$set(t.edit_bar,"edit_layer",!0)},opacity_change:function(t){var e=this;e.in_move.alpha=t/100,e.pushActiveLog(!0)},show_rotation_block:function(){var t=this;t.hide_edit_f(),t.in_move&&!t.temporary_rect?t.$set(t.edit_bar,"rotation",Math.floor(180*t.in_move.rotation/Math.PI)):t.temporary_rect&&t.$set(t.edit_bar,"rotation",Math.floor(180*t.temporary_rect.rotation/Math.PI)),t.$set(t.edit_bar,"edit_rotation",!0)},show_skew_block:function(){var t=this;t.hide_edit_f(),t.$set(t.edit_bar,"skewX",t.in_move.skew.x),t.$set(t.edit_bar,"skewY",t.in_move.skew.y),t.$set(t.edit_bar,"edit_skew",!0)},showColorBlock:function(){var t=this;t.hide_edit_f(),t.updateText(),t.$set(t.edit_bar,"edit_color",!0)},showEditShadow:function(){var t=this;t.hide_edit_f(),t.updateText(),t.$set(t.edit_bar,"edit_shadow",!0)},rotationChange:function(t){var e=this;e.in_move&&!e.temporary_rect?(e.in_move.rotation=t*Math.PI/180,e.outLine_container.getChildByName(e.in_move.name).rotation=t*Math.PI/180,setTimeout((function(){""!==e.in_move.association_name&&e.aSingleClickBorder(e.in_move.association_name)}),25)):e.temporary_rect?(e.onTRotateStart(),t>0?e.tRotateOBj(t*Math.PI/180,1e4):e.tRotateOBj(-t*Math.PI/180,-1e4),e.onTRotateEnd()):!e.temporary_rect&&e.ctrl_arr.length,e.pushActiveLog(!0)},skewChange:function(t){var e=this,a="x"===t?[e.edit_bar.skewX,e.in_move.skew.y]:[e.in_move.skew.x,e.edit_bar.skewY],r=Object(o["a"])(a,2),n=r[0],i=r[1];e.in_move.skew.set(n,i)},findFinalIndex:function(t){var e=this,a=-100,r=e.project_m_comp.length-1;if(0==e.container_arr.length)return a=0,a;if(e.project_m_comp[0].name==t&&e.container_arr.length>0)return a=e.container_arr.length-1,a;if(e.container_arr.map((function(e,r,n){e.m_comp_name==t&&(a=r)})),-100!=a)return a;if(e.project_m_comp[r].name==t)return a=-1;for(var n=0;n<e.project_m_comp.length;n++)if(e.project_m_comp[n].name==t)return e.findFinalIndex(e.project_m_comp[n+1].name)},onRightFunc:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=this;1==t.type?(a.normalStart(t.currentTarget,t.data),t.currentTarget.dragging=!1,a.$set(a.right_block.menu,"ass",3),a.$set(a.right_block,"delete_type",1),a.$set(a.right_block.menu,"change",!1),a.$set(a.right_block.menu,"edit_text",!1),"image"==t.currentTarget.type?a.$set(a.right_block.menu,"change",!0):"text"==t.currentTarget.type&&a.$set(a.right_block.menu,"edit_text",!0),a.$set(a.right_block.menu,"show_lock",!0),t.currentTarget.lock?(a.$set(a.right_block.menu,"lock",!0),a.$set(a.right_block,"unlock_text","解锁"),a.containerLine(t.currentTarget,!1,!0,!1,!0)):(a.$set(a.right_block.menu,"lock",!1),a.$set(a.right_block,"lock_text","锁定"))):2==t.type?(a.$set(a.right_block.menu,"change",!1),a.$set(a.right_block.menu,"edit_text",!1),a.$set(a.right_block.menu,"ass",1),a.$set(a.right_block,"delete_type",2),a.$set(a.right_block.menu,"show_lock",!1)):3==t.type&&(a.onAssociationStart(e,!0),a.$set(a.right_block.menu,"ass",2),a.$set(a.right_block.menu,"change",!1),a.$set(a.right_block.menu,"edit_text",!1),a.$set(a.right_block.menu,"show_lock",!0),e.currentTarget.lock?(a.$set(a.right_block.menu,"lock",!0),a.$set(a.right_block,"unlock_text","解锁组合")):(a.$set(a.right_block.menu,"lock",!1),a.$set(a.right_block,"lock_text","锁定组合")))},onRightAss:function(){var t=this;t.arrToAss(t.ctrl_arr),t.$set(t.right_block,"show",!1)},onRight_unAss:function(){var t=this;t.removeLine(),t.clearTemAss(!0,!0),t.ctrl_arr.map((function(t,e,a){t.association_name=""})),t.ctrl_arr.length=0,t.$set(t.right_block,"show",!1),t.cancelInMove()},addACtrlarr:function(t){for(var e=this,a=0;a<e.container_arr.length;a++)e.container_arr[a].cont.children[0].association_name==t&&e.ctrl_arr.push(e.container_arr[a].cont.children[0])},setCtrlArrAssname:function(){for(var t=this,e=[],a=0;a<t.ctrl_arr.length;a++)""!==t.ctrl_arr[a].association_name&&e.push(t.ctrl_arr[a].association_name);return e=new Set(e),Object(i["a"])(e)},ctrlAddAss:function(t,e){for(var a=this,r=0;r<a.container_arr.length;r++)t==a.container_arr[r].cont.children[0].association_name&&a.ctrl_arr.push(a.container_arr[r].cont.children[0]);return e.push(t)},ctrlDisAss:function(t,e){var a=this;return a.ctrl_arr=a.ctrl_arr.filter((function(e){return a.removeLine(e.name),e.association_name!==t})),e.filter((function(e){return e!==t}))},show_click:function(t){var e=this,a=e.findCont(t);e.in_move=e.container_arr[a].cont.children[0],""==e.in_move.association_name?e.in_move.lock?(e.containerLine(e.in_move,!1,!0,!1,!0),e.$set(e.edit_bar.btn,"show",!1)):(e.clearTemporary(),e.containerLine(e.in_move,!1,!0),e.showEdit(e.in_move.type)):(e.ctrl_arr.length=0,e.addACtrlarr(e.in_move.association_name),e.in_move.lock?(e.renderTLine(!1,!0,e.in_move.association_name,!0),e.$set(e.edit_bar.btn,"show",!1)):(e.aSingleClickBorder(e.in_move.association_name),e.click_ass_id=e.in_move.association_name,"image"==e.in_move.type?e.showEdit("image_in"):"text"==e.in_move.type&&e.showEdit("text_in")))},moveIndex:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=this;a.in_move?a.upDownMove(a.findCont(a.in_move.name),t,e):a.upDownMove(a.findCont(a.ctrl_arr[0].name),t,e)},toImage:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t)return this.toImage2(t);this.toImage2(t)},canvasToimg:function(){var t=this;t.p_app.renderer.plugins.extract.base64(t.p_app.stage)},keyboard:function(t,e){var a={};a.code=t,a.secondCode=e||-111,a.isDown=!1,a.isUp=!0,a.press=void 0,a.release=void 0;navigator.userAgent.toLowerCase();var r=/macintosh|mac os x/i.test(navigator.userAgent);return a.downHandler=function(t){t.keyCode!==a.code&&t.keyCode!==a.secondCode||((a.isUp||r)&&a.press&&a.press(),a.isDown=!0,a.isUp=!1,91!=t.keyCode&&93!=t.keyCode&&38!=t.keyCode&&40!=t.keyCode||t.preventDefault())},a.upHandler=function(t){t.keyCode!==a.code&&t.keyCode!==a.secondCode||(a.isDown&&a.release&&a.release(),a.isDown=!1,a.isUp=!0,91!=t.keyCode&&93!=t.keyCode&&38!=t.keyCode&&40!=t.keyCode||t.preventDefault())},window.addEventListener("keydown",a.downHandler.bind(a),!1),window.addEventListener("keyup",a.upHandler.bind(a),!1),a},addPopShow:function(t){var e=this;e.$set(e,"addPop",t)},changeImage:function(){var t=this;t.hide_edit_f(),t.$set(t,"addPop",!0),d["a"].$emit("image_change"),t.$set(t.right_block,"show",!1)},changeInMoveImage:function(t){for(var e=this,a=_.cloneDeep(e.active_log[e.active_log.length-1]),r=0;r<a.length;r++)1==a[r].children[0].ass_children.length&&"image"==a[r].children[0].ass_children[0].type&&a[r].children[0].ass_children[0].file_id==e.in_move.file_id&&(a[r].children[0].ass_children[0].file_id=t.file_id,a[r].children[0].ass_children[0].src=t.src);e.active_log.length>=30&&e.active_log.splice(0,1),e.active_log.splice(e.active_index+1,30),e.active_log.push(a),e.$set(e,"render_data",e.active_log[e.active_log.length-1]),e.$set(e,"active_index",e.active_log.length-1),e.renderTemplate()}},components:{addPop:function(){return a.e("chunk-33a0a2e8").then(a.bind(null,"dffa"))},"mould-func":function(){return a.e("chunk-8f410caa").then(a.bind(null,"525e"))}}},R=L,I=a("5511"),j=Object(I["a"])(R,r,n,!1,null,null,null);e["default"]=j.exports},"725c":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAALVBMVEUAAAD////////////////////////////gIzD/+fn6wsP4u7z1oqTkOkLwg4YCo7cpAAAAB3RSTlMAU/Pc2aWK4C2QgAAAAFBJREFUCNdjAAOVQAYYKC83RDDLE6DMU9PLy6DMjtvl5QJQZsfzcgMYs7u8EMbsnV4KY3YsL4EzjxdhMBEKENoQhiGsQFiMcA7CkShOR3gIAPtHKq1l+wA8AAAAAElFTkSuQmCC"},ac74:function(t,e,a){"use strict";var r=a("5352"),n=a("58c2"),i=a("8b0c");r({target:"String",proto:!0,forced:i("link")},{link:function(t){return n(this,"a","href",t)}})},d314:function(t,e,a){var r=a("5352"),n=a("1f8e");r({global:!0,forced:parseFloat!=n},{parseFloat:n})},dbe6:function(t,e,a){"use strict";var r=a("5352"),n=a("1403").indexOf,i=a("0a27"),o=[].indexOf,c=!!o&&1/[1].indexOf(1,-0)<0,s=i("indexOf");r({target:"Array",proto:!0,forced:c||s},{indexOf:function(t){return c?o.apply(this,arguments)||0:n(this,t,arguments.length>1?arguments[1]:void 0)}})},dced:function(t,e,a){"use strict";var r=a("5352"),n=a("90c9").f,i=a("30d6"),o=a("5a78"),c=a("70e4"),s=a("62c9"),l=a("9cbb"),_="".startsWith,d=Math.min,h=s("startsWith"),p=!l&&!h&&!!function(){var t=n(String.prototype,"startsWith");return t&&!t.writable}();r({target:"String",proto:!0,forced:!p&&!h},{startsWith:function(t){var e=String(c(this));o(t);var a=i(d(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return _?_.call(e,r,a):e.slice(a,a+r.length)===r}})},e669:function(t,e,a){"use strict";var r=a("3d50"),n=a("1e11");t.exports=r("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),n)},fd7a:function(t,e,a){"use strict";var r=a("5352"),n=a("7489"),i=a("e4ac"),o=a("0a27"),c=[].join,s=n!=Object,l=o("join",",");r({target:"Array",proto:!0,forced:s||l},{join:function(t){return c.call(i(this),void 0===t?",":t)}})}}]);
//# sourceMappingURL=chunk-35665c82.cc1a343f.js.map